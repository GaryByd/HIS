11:10:28:405  INFO 8476 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 8476 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
11:10:28:410 DEBUG 8476 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
11:10:28:410  INFO 8476 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
11:10:31:455 DEBUG 8476 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskAiDoctorClient.class]
11:10:31:466 DEBUG 8476 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
11:10:32:397  INFO 8476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
11:10:32:410  INFO 8476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
11:10:32:530  INFO 8476 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
11:10:33:148  INFO 8476 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f44c2570-ea82-3bf8-a870-f8723d995811
11:10:35:623  INFO 8476 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
11:10:35:654  INFO 8476 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
11:10:35:655  INFO 8476 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
11:10:35:909  INFO 8476 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
11:10:35:909  INFO 8476 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7375 ms
11:10:37:285  INFO 8476 --- [main] org.redisson.Version                     : Redisson 3.17.7
11:10:38:189  INFO 8476 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
11:10:38:942  INFO 8476 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
11:10:39:403 DEBUG 8476 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
11:10:40:852  INFO 8476 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
11:10:41:499  INFO 8476 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
11:10:41:525  INFO 8476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
11:10:42:371  INFO 8476 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@84eafc2
11:10:42:376  INFO 8476 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
11:10:44:241  WARN 8476 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
11:10:44:248  INFO 8476 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
11:10:44:345  INFO 8476 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
11:10:44:425  INFO 8476 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
11:10:44:425  INFO 8476 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
11:10:47:295  INFO 8476 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
11:10:47:300  INFO 8476 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
11:10:47:301  INFO 8476 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
11:10:47:302  INFO 8476 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
11:10:47:402  INFO 8476 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
11:10:47:580  INFO 8476 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 21.135 seconds (JVM running for 23.83)
13:07:32:277  INFO 8476 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:07:32:279  INFO 8476 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:07:32:295  INFO 8476 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 16 ms
13:07:32:669  INFO 8476 --- [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:07:33:128  INFO 8476 --- [http-nio-8080-exec-1] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@28a5e5db
13:07:33:146  INFO 8476 --- [http-nio-8080-exec-1] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
13:07:33:174 DEBUG 8476 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.disease_name, d.disease_category, d.create_time, d.status, d.name, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
13:07:33:224 DEBUG 8476 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
13:07:33:402 ERROR 8476 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
### The error may exist in file [A:\Desktop\workspace\HIS\his_service\target\classes\mapper\DiagnosisReportMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT         d.id,         d.disease_name,         d.disease_category,         d.create_time,         d.status,         d.name,         a.version         FROM         diagnosis_report d         JOIN         ai_model a ON d.aimodel_id = a.id                             ORDER BY d.create_time DESC
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'] with root cause

java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.proxy3/jdk.proxy3.$Proxy166.execute(Unknown Source) ~[na:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:333) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.13.jar:3.5.13]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForIPage(MybatisMapperMethod.java:121) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:85) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy130.getDiagnosisList(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReports(DiagnosisReportServiceImpl.java:45) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b46bef71.diagnosisReports(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.DiagnosisReportController.diagnosisReports(DiagnosisReportController.java:36) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:39) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:09:15:155  WARN 8476 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:09:15:156  WARN 8476 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:09:15:156  WARN 8476 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:09:15:172  WARN 8476 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:09:15:246  INFO 8476 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:09:15:287  INFO 8476 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:09:15:425  INFO 8476 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
13:09:15:760  INFO 8476 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
13:09:20:015  INFO 17916 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 17916 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:09:20:016 DEBUG 17916 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:09:20:017  INFO 17916 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:09:21:376 DEBUG 17916 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskAiDoctorClient.class]
13:09:21:378 DEBUG 17916 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:09:21:772  INFO 17916 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:09:21:775  INFO 17916 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:09:21:806  INFO 17916 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
13:09:22:112  INFO 17916 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=f44c2570-ea82-3bf8-a870-f8723d995811
13:09:22:875  INFO 17916 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:09:22:887  INFO 17916 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:09:22:888  INFO 17916 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:09:23:057  INFO 17916 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:09:23:057  INFO 17916 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2974 ms
13:09:23:772  INFO 17916 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:09:24:208  INFO 17916 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:09:24:948  INFO 17916 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:09:25:597 DEBUG 17916 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:09:26:754  INFO 17916 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:09:27:397  INFO 17916 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:09:27:425  INFO 17916 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:09:28:181  INFO 17916 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@78324e97
13:09:28:183  INFO 17916 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:09:30:088  WARN 17916 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:09:30:095  INFO 17916 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:09:30:259  INFO 17916 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
13:09:30:402  INFO 17916 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:09:30:402  INFO 17916 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:09:32:810  INFO 17916 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:09:32:813  INFO 17916 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:09:32:815  INFO 17916 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:09:32:815  INFO 17916 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:09:32:929  INFO 17916 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:09:33:265  INFO 17916 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 14.303 seconds (JVM running for 15.55)
13:09:33:579  INFO 17916 --- [RMI TCP Connection(5)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:09:33:579  INFO 17916 --- [RMI TCP Connection(5)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:09:33:579  INFO 17916 --- [RMI TCP Connection(4)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:09:33:581  INFO 17916 --- [RMI TCP Connection(5)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
13:09:33:936  INFO 17916 --- [RMI TCP Connection(4)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7bacff3d
13:09:33:943  INFO 17916 --- [RMI TCP Connection(4)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
13:10:24:914  WARN 17916 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:10:24:915  WARN 17916 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:10:24:916  WARN 17916 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:10:24:921  WARN 17916 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:10:24:992  INFO 17916 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:10:25:026  INFO 17916 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:10:25:147  INFO 17916 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
13:10:25:485  INFO 17916 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
13:10:37:383  INFO 29188 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 29188 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:10:37:384 DEBUG 29188 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:10:37:384  INFO 29188 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:10:38:370 DEBUG 29188 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:10:38:373 DEBUG 29188 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:10:38:800  INFO 29188 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:10:38:805  INFO 29188 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:10:38:844  INFO 29188 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Redis repository interfaces.
13:10:39:206  INFO 29188 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=1e3ffdea-daf7-3d35-8f56-77e1bda78747
13:10:40:948  INFO 29188 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:10:40:976  INFO 29188 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:10:40:977  INFO 29188 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:10:41:228  INFO 29188 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:10:41:228  INFO 29188 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3783 ms
13:10:41:963  INFO 29188 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:10:42:385  INFO 29188 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:10:43:124  INFO 29188 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:10:43:319 DEBUG 29188 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:10:44:398  INFO 29188 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:10:44:822  INFO 29188 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:10:44:846  INFO 29188 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:10:45:485  INFO 29188 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5c552f08
13:10:45:487  INFO 29188 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:10:46:957  WARN 29188 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:10:46:962  INFO 29188 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:10:47:053  INFO 29188 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
13:10:47:112  INFO 29188 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:10:47:112  INFO 29188 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:10:49:737  INFO 29188 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:10:49:739  INFO 29188 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:10:49:739  INFO 29188 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:10:49:740  INFO 29188 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:10:49:833  INFO 29188 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:10:50:085  INFO 29188 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 13.923 seconds (JVM running for 15.572)
13:11:19:948  INFO 29188 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:11:19:948  INFO 29188 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:11:19:950  INFO 29188 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
13:11:20:166  WARN 29188 --- [http-nio-8080-exec-2] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'page' for method parameter type Integer is present but converted to null]
13:11:39:450  WARN 29188 --- [http-nio-8080-exec-4] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'page' for method parameter type Integer is present but converted to null]
13:11:50:339  INFO 29188 --- [http-nio-8080-exec-8] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:11:50:652  INFO 29188 --- [http-nio-8080-exec-8] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@73914685
13:11:50:656  INFO 29188 --- [http-nio-8080-exec-8] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
13:11:50:670 DEBUG 29188 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,disease_name,disease_category,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:11:50:712 DEBUG 29188 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:11:50:898 ERROR 29188 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'disease_name' in 'field list'
### The error may exist in com/luojiawei/his_service/mapper/DiagnosisReportMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT id,patient_id,doctor_id,disease_name,disease_category,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'disease_name' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'disease_name' in 'field list'] with root cause

java.sql.SQLSyntaxErrorException: Unknown column 'disease_name' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.proxy3/jdk.proxy3.$Proxy168.execute(Unknown Source) ~[na:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:333) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:75) ~[mybatis-3.5.13.jar:3.5.13]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectOne(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy130.selectById(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:69) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$c7a05b24.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:33) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:13:07:819  WARN 29188 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:13:07:820  WARN 29188 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:13:07:819  WARN 29188 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:13:07:833  WARN 29188 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:13:07:898  INFO 29188 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:13:07:938  INFO 29188 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:13:08:008  INFO 29188 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
13:13:08:355  INFO 29188 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
13:13:46:093  INFO 12920 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 12920 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:13:46:094 DEBUG 12920 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:13:46:095  INFO 12920 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:13:46:784 DEBUG 12920 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:13:46:785 DEBUG 12920 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:13:47:152  INFO 12920 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:13:47:156  INFO 12920 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:13:47:184  INFO 12920 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
13:13:47:432  INFO 12920 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=1e3ffdea-daf7-3d35-8f56-77e1bda78747
13:13:48:004  INFO 12920 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:13:48:014  INFO 12920 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:13:48:015  INFO 12920 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:13:48:168  INFO 12920 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:13:48:168  INFO 12920 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2026 ms
13:13:48:711  INFO 12920 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:13:49:084  INFO 12920 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:13:49:835  INFO 12920 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:13:49:967 DEBUG 12920 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:13:50:712  INFO 12920 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:13:51:003  INFO 12920 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:13:51:018  INFO 12920 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:13:51:553  INFO 12920 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@fa689db
13:13:51:555  INFO 12920 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:13:52:813  WARN 12920 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:13:52:819  INFO 12920 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:13:52:907  INFO 12920 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
13:13:52:945  INFO 12920 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:13:52:946  INFO 12920 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:13:53:920  INFO 12920 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:13:53:922  INFO 12920 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:13:53:922  INFO 12920 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:13:53:923  INFO 12920 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:13:54:033  INFO 12920 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:13:54:267  INFO 12920 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 9.007 seconds (JVM running for 9.995)
13:13:54:642  INFO 12920 --- [RMI TCP Connection(1)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:13:54:643  INFO 12920 --- [RMI TCP Connection(1)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:13:54:644  INFO 12920 --- [RMI TCP Connection(1)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
13:13:54:648  INFO 12920 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:13:54:977  INFO 12920 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@39c9a655
13:13:54:980  INFO 12920 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
13:13:56:864 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:13:56:901 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:13:57:034 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : <==      Total: 1
13:13:57:035 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:13:57:037 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:13:57:079 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:13:57:081 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:13:57:081 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:13:57:115 DEBUG 12920 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:13:57:130 ERROR 12920 --- [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$749a85e.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:33) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:13:58:632 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:13:58:632 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:13:58:668 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : <==      Total: 1
13:13:58:668 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:13:58:669 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:13:58:704 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:13:58:704 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:13:58:705 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:13:58:737 DEBUG 12920 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:13:58:740 ERROR 12920 --- [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$749a85e.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:33) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:14:28:346  WARN 12920 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:14:28:346  WARN 12920 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:14:28:346  WARN 12920 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:14:28:348  WARN 12920 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:14:28:396  INFO 12920 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:14:28:437  INFO 12920 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:14:28:492  INFO 12920 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
13:14:28:849  INFO 12920 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
13:14:35:409  INFO 34528 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 34528 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:14:35:410 DEBUG 34528 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:14:35:426  INFO 34528 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:14:36:199 DEBUG 34528 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:14:36:199 DEBUG 34528 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:14:36:555  INFO 34528 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:14:36:557  INFO 34528 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:14:36:585  INFO 34528 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
13:14:36:900  INFO 34528 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:14:37:588  INFO 34528 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:14:37:597  INFO 34528 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:14:37:597  INFO 34528 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:14:37:760  INFO 34528 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:14:37:760  INFO 34528 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2281 ms
13:14:38:167  INFO 34528 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:14:38:569  INFO 34528 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:14:39:326  INFO 34528 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:14:39:674 DEBUG 34528 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:14:40:419  INFO 34528 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:14:40:686  INFO 34528 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:14:40:703  INFO 34528 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:14:41:223  INFO 34528 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2941631f
13:14:41:225  INFO 34528 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:14:42:647  WARN 34528 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:14:42:651  INFO 34528 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:14:42:737  INFO 34528 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
13:14:42:782  INFO 34528 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:14:42:783  INFO 34528 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:14:43:774  INFO 34528 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:14:43:776  INFO 34528 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:14:43:777  INFO 34528 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:14:43:777  INFO 34528 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:14:43:873  INFO 34528 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:14:44:064  INFO 34528 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 9.579 seconds (JVM running for 10.678)
13:14:44:308  INFO 34528 --- [RMI TCP Connection(3)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:14:44:308  INFO 34528 --- [RMI TCP Connection(3)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:14:44:311  INFO 34528 --- [RMI TCP Connection(3)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
13:14:44:315  INFO 34528 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:14:44:650  INFO 34528 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@666879be
13:14:44:653  INFO 34528 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
13:14:45:473 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
13:14:45:505 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
13:14:45:594 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
13:14:52:862  WARN 34528 --- [http-nio-8080-exec-3] o.a.c.util.SessionIdGeneratorBase        : Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [114] milliseconds.
13:14:53:641 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.PatientMapper.selectIdByOpenId   : ==>  Preparing: select id, open_id, phone, name, verified, hospital_pid from patient where open_id = ?
13:14:53:642 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.PatientMapper.selectIdByOpenId   : ==> Parameters: owhoa7fITbB2gA1N4dxwWmjN8Xsw(String)
13:14:53:673 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.PatientMapper.selectIdByOpenId   : <==      Total: 1
13:15:24:566 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:15:24:566 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:15:24:612 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : <==      Total: 1
13:15:24:613 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:15:24:613 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:15:24:646 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:15:24:647 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:15:24:648 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:15:24:687 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:15:24:696 ERROR 34528 --- [http-nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:15:54:188 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:15:54:189 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:15:54:223 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : <==      Total: 1
13:15:54:224 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:15:54:225 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:15:54:258 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:15:54:259 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:15:54:259 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:15:54:291 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:16:08:012 ERROR 34528 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:16:28:759 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:16:28:760 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:16:28:796 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : <==      Total: 1
13:16:28:797 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:16:28:798 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:16:28:833 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:16:28:834 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:16:28:834 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:16:28:871 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:16:28:873 ERROR 34528 --- [http-nio-8080-exec-10] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:16:31:518 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:16:31:518 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
13:16:31:551 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.D.selectById                     : <==      Total: 1
13:16:31:551 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:16:31:551 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
13:16:31:583 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:17:01:564  WARN 34528 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=50s219ms111µs200ns).
13:17:01:574  WARN 34528 --- [HikariPool-2 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=46s776ms781µs400ns).
13:17:01:619 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:17:01:622 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
13:17:01:671 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:17:05:301 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:17:05:303 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
13:17:05:341 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:17:06:067 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:17:06:074 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:17:06:121 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
13:17:06:601 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:17:06:605 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:17:06:643 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:17:07:196 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:17:07:200 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
13:17:07:236 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:17:39:460 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:17:39:460 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
13:17:39:488 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:17:39:488 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:17:39:492 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
13:17:39:493 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:17:39:493 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
13:17:39:525 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : <==      Total: 1
13:17:39:525 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:17:39:535 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:17:39:535 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:17:39:536 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
13:17:39:536 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:17:39:637 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:17:39:637 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:17:39:637 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:17:39:638 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:17:39:670 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:17:39:672 ERROR 34528 --- [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:17:42:423 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:17:42:423 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
13:17:42:455 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:17:42:456 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:17:42:456 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:17:42:490 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
13:17:42:491 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:17:42:491 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:17:42:522 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:17:42:523 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:17:42:523 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
13:17:42:554 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:17:46:634 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.m.PatientMapper.selectIdByOpenId   : ==>  Preparing: select id, open_id, phone, name, verified, hospital_pid from patient where open_id = ?
13:17:46:634 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.m.PatientMapper.selectIdByOpenId   : ==> Parameters: owhoa7fITbB2gA1N4dxwWmjN8Xsw(String)
13:17:46:666 DEBUG 34528 --- [http-nio-8080-exec-4] c.l.h.m.PatientMapper.selectIdByOpenId   : <==      Total: 1
13:17:49:067 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:17:49:068 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
13:17:49:099 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : <==      Total: 1
13:17:49:099 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:17:49:100 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
13:17:49:132 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:17:49:132 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:17:49:133 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
13:17:49:165 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:17:51:938 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:17:51:939 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
13:17:51:970 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:17:51:971 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:17:51:971 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:17:52:001 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:17:52:001 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
13:17:52:002 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:17:52:002 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:17:52:002 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:17:52:033 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : <==      Total: 1
13:17:52:033 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:17:52:033 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:17:52:033 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:17:52:034 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
13:17:52:034 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:17:52:065 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:17:52:065 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:17:52:066 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:17:52:068 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:17:52:096 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:17:52:097 ERROR 34528 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:17:58:813 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:17:58:813 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:17:58:855 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : <==      Total: 1
13:17:58:855 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:17:58:855 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:17:58:887 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:17:58:887 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:17:58:888 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:17:58:920 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:17:58:921 ERROR 34528 --- [http-nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:18:03:725 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:18:03:725 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:18:03:756 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.m.D.selectById                     : <==      Total: 1
13:18:03:757 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:18:03:757 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:18:03:790 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:18:03:791 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:18:03:791 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:18:03:823 DEBUG 34528 --- [http-nio-8080-exec-9] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:18:03:830 ERROR 34528 --- [http-nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:18:06:888 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:18:06:889 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:18:06:925 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
13:18:06:925 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:18:06:926 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:18:06:958 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:18:06:959 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:18:06:959 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:18:06:991 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:18:06:993 ERROR 34528 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:18:15:012 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:18:15:012 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:18:15:044 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : <==      Total: 1
13:18:15:045 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:18:15:045 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:18:15:076 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:18:15:076 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:18:15:076 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:18:15:107 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:18:15:109 ERROR 34528 --- [http-nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:18:43:844 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:18:43:844 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : ==> Parameters: 6(Integer)
13:18:43:875 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : <==      Total: 1
13:18:43:876 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:18:43:876 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 8(Integer)
13:18:43:907 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:18:43:907 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:18:43:908 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 6(Integer)
13:18:43:940 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:18:43:940 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:18:43:940 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 6(Integer)
13:18:43:972 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:18:43:972 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:18:43:973 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 6(Integer)
13:18:44:003 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
13:18:44:004 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:18:44:004 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 6(Integer)
13:18:44:035 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:18:44:035 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:18:44:036 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 6(Integer)
13:18:44:067 DEBUG 34528 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:18:47:849 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:18:47:852 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:18:47:890 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : <==      Total: 1
13:18:47:891 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:18:47:895 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:18:47:935 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:18:47:937 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:18:47:940 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:18:47:976 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:18:50:243 ERROR 34528 --- [http-nio-8080-exec-10] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:18:56:856 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:18:56:857 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : ==> Parameters: 4(Integer)
13:18:56:888 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : <==      Total: 1
13:18:56:888 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:18:56:888 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 4(Integer)
13:18:56:920 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:18:56:921 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:18:56:921 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 4(Integer)
13:18:56:952 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:18:56:952 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:18:56:952 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 4(Integer)
13:18:56:983 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:18:56:983 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:18:56:983 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 4(Integer)
13:18:57:014 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 1
13:18:57:014 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:18:57:015 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 4(Integer)
13:18:57:046 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:18:57:047 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:18:57:047 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 4(Integer)
13:18:57:078 DEBUG 34528 --- [http-nio-8080-exec-7] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:19:03:017 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:19:03:018 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:19:03:052 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : <==      Total: 1
13:19:03:052 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:19:03:052 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:19:03:086 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:19:03:086 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:19:03:086 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:19:03:117 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:19:03:118 ERROR 34528 --- [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:19:09:038 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:19:09:038 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:19:09:069 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
13:19:09:070 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:19:09:070 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:19:09:104 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:19:09:104 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:19:09:104 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:19:09:135 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:19:09:136 ERROR 34528 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:19:19:439 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:19:19:439 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:19:19:475 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : <==      Total: 1
13:19:19:476 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:19:19:477 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:19:19:508 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:19:19:509 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:19:19:509 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:19:19:540 DEBUG 34528 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:19:26:332 ERROR 34528 --- [http-nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:19:28:338 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:19:28:339 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:19:28:385 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : <==      Total: 1
13:19:28:385 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:19:28:386 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:19:28:431 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:19:28:432 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:19:28:432 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:19:28:463 DEBUG 34528 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:19:40:284 ERROR 34528 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:19:55:663 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:19:55:663 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
13:19:55:695 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : <==      Total: 1
13:19:55:696 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:19:55:696 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
13:19:55:729 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:19:55:730 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:19:55:730 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
13:19:55:763 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:19:55:763 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:19:55:763 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 3(Integer)
13:19:55:798 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:19:55:798 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:19:55:798 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 3(Integer)
13:19:55:831 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 1
13:19:55:831 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:19:55:832 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 3(Integer)
13:19:55:862 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:19:55:863 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:19:55:863 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 3(Integer)
13:19:55:896 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:19:55:912 DEBUG 34528 --- [http-nio-8080-exec-10] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果C, diagnosisCategory=诊断结果C, result=诊断结果C, remark=备注C, treatmentPlan=TreatmentPlans(id=3, diagnosisId=3, treatmentType=3, treatmentDetail=激光治疗, startTime=null, endDate=null, doctorId=3, createdTime=2025-04-01T09:00, updatedTime=2025-04-01T09:00), medications=[MedicationRecommendations(id=3, diagnosisId=3, medicationName=药物C, dosage=15mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=3, createdTime=2025-04-01T09:00, updatedTime=2025-04-01T09:00)], previousConversations=[DialogueInfo(role=user, content=这个病严重吗？), DialogueInfo(role=assistant, content=根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。)], question=我需要注意些什么？, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@7a2ffb0b]
13:19:55:917 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
13:19:55:917 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 1036
13:19:55:917 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
13:19:55:917 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
13:19:55:917 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果C","disease_category":"诊断结果C","result":"诊断结果C","remark":"备注C","treatment_plan":{"id":3,"diagnosisId":3,"createdTime":"2025-04-01T09:00:00","updatedTime":"2025-04-01T09:00:00","treatment_type":3,"treatment_detail":"激光治疗"},"medications":[{"id":3,"diagnosis_id":3,"medication_name":"药物C","dosage":"15mg","frequency":"一天一次","side_effects":"无","doctor_id":3,"created_time":"2025-04-01 09:00:00","updated_time":"2025-04-01 09:00:00"}],"previous_conversations":[{"role":"user","content":"这个病严重吗？"},{"role":"assistant","content":"根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。"}],"question":"我需要注意些什么？","stream":false}
13:19:55:918 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (1036-byte body)
13:20:06:296 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:20:06:296 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==> Parameters: 4(Integer)
13:20:06:328 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : <==      Total: 1
13:20:06:328 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:20:06:328 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 4(Integer)
13:20:06:373 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:20:06:374 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:20:06:374 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 4(Integer)
13:20:06:406 DEBUG 34528 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 0
13:20:06:407 ERROR 34528 --- [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null] with root cause

java.lang.NullPointerException: Cannot invoke "com.luojiawei.common.domain.po.Doctor.getId()" because "doctor" is null
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:79) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.DiagnosisReportController.diagnosisReport(DiagnosisReportController.java:52) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:20:19:907 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (23989ms)
13:20:19:908 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 3237
13:20:19:908 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
13:20:19:908 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 05:19:55 GMT
13:20:19:908 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
13:20:19:908 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
13:20:19:909 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"response_id":"e34bc048-61a2-44ac-803b-9be77ad0f404","content":"<think>\n好的，我需要回答用户关于诊断结果C需要注意什么的问题。首先，用户之前询问过病情严重性，现在根据新的检查结果，诊断是诊断结果C，治疗计划包括激光治疗和药物C的使用。用户可能想知道日常生活中的注意事项，比如药物使用、副作用、生活习惯调整等。\n\n首先，我要确保理解诊断结果C的具体情况，但可能用户提供的信息有限，所以需要保持一般性建议。根据常见的糖尿病视网膜病变治疗，激光治疗后的护理是关键。需要提醒用户保护眼睛，避免剧烈运动，防止眼压升高，按时用药，特别是药物C的剂量和频率。虽然可能的副作用标注为无，但还是要提醒观察异常反应。\n\n生活习惯方面，控制血糖、血压、血脂非常重要，尤其是糖尿病视网膜病变患者。饮食调整、戒烟、规律复查都是重点。需要强调定期眼科检查的必要性，因为病变可能进展。同时，避免揉眼和用眼过度，防止眼部受伤。\n\n另外，用户可能对激光治疗有疑问，比如治疗后的恢复期、注意事项等，但用户没有具体问，所以可能不需要展开。但回答时要涵盖可能的护理要点。用药方面，即使副作用标注为无，也应提醒按医嘱服药，不要自行调整剂量。\n\n需要确保回答专业但易懂，避免使用过多术语。同时，强调及时就医的重要性，特别是出现视力变化或其他异常症状时。最后，保持支持性语气，鼓励用户积极管理健康。\n</think>\n\n\n\n根据您提供的诊断结果C和治疗计划，您需要注意以下事项：\n\n**1. 激光治疗后的护理：**\n- 治疗后24小时内避免剧烈运动或低头动作\n- 注意眼部清洁，防止感染\n- 治疗后可能出现短暂视力模糊或光敏感，建议佩戴墨镜外出\n- 如出现持续眼痛、视力骤降等异常立即复诊\n\n**2. 用药注意事项：**\n- 严格遵医嘱按时服用药物C（15mg/日）\n- 即使标注\"无副作用\"仍需观察身体反应\n- 避免自行调整剂量或停药\n- 服药期间建议记录用药情况和身体变化\n\n**3. 生活方式管理：**\n- 严格监测并控制血糖（建议空腹<7mmol/L，餐后<10mmol/L）\n- 保持血压<130/80mmHg，血脂达标\n- 饮食注意低GI、高纤维、适量优质蛋白\n- 绝对戒烟（包括二手烟）\n\n**4. 日常防护：**\n- 避免揉眼、剧烈咳嗽等可能引起眼压升高的动作\n- 使用护目镜防止眼部外伤\n- 减少长时间用眼（每30分钟休息5分钟）\n\n**5. 复查监测：**\n- 按医嘱定期进行眼底荧光造影和OCT检查\n- 建议每3个月复查糖化血红蛋白\n- 出现飞蚊症突然增多、视野缺损等立即就诊\n\n请注意这些建议需结合主治医生的具体指导，个体情况可能存在差异。治疗期间请保持与眼科医生的密切沟通，及时反馈任何异常症状。良好的疾病管理需要医患共同努力，您现在的积极配合对预后非常关键。","references":[],"created_at":"2025-04-05T05:20:19.880325+00:00"}
13:20:19:909 DEBUG 34528 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (3237-byte body)
13:20:24:331 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:20:24:332 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==> Parameters: 1(Integer)
13:20:24:363 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : <==      Total: 1
13:20:24:364 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:20:24:364 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 2001(Integer)
13:20:24:396 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:20:24:396 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:20:24:396 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3001(Integer)
13:20:24:428 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:20:24:429 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:20:24:429 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 1(Integer)
13:20:24:461 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 31
13:20:24:462 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:20:24:462 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 1(Integer)
13:20:24:495 DEBUG 34528 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 17
13:20:24:499 ERROR 34528 --- [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17] with root cause

org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:81) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.internal.reflect.GeneratedMethodAccessor48.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectOne(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy134.selectByDiagnosisId(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:85) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$b4c9c986.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.DiagnosisReportController.diagnosisReport(DiagnosisReportController.java:52) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

13:20:39:322 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
13:20:39:322 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
13:20:39:353 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
13:20:39:353 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:20:39:353 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
13:20:39:389 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:20:39:390 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
13:20:39:390 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
13:20:39:420 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
13:20:39:421 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
13:20:39:421 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
13:20:39:453 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
13:20:39:455 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
13:20:39:466 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:20:39:497 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
13:20:39:497 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
13:20:39:497 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
13:20:39:529 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
13:20:39:530 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
13:20:39:530 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
13:20:39:561 DEBUG 34528 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
13:31:26:957  WARN 34528 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:31:26:957  WARN 34528 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:31:26:957  WARN 34528 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:31:26:973  WARN 34528 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:31:27:039  INFO 34528 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:31:27:075  INFO 34528 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:31:27:090  INFO 34528 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
13:31:27:396  INFO 34528 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
13:31:31:529  INFO 14940 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 14940 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:31:31:530 DEBUG 14940 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:31:31:530  INFO 14940 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:31:32:383 DEBUG 14940 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:31:32:387 DEBUG 14940 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:31:32:691  INFO 14940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:31:32:693  INFO 14940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:31:32:723  INFO 14940 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
13:31:33:004  INFO 14940 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:31:34:633  INFO 14940 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:31:34:659  INFO 14940 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:31:34:660  INFO 14940 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:31:34:896  INFO 14940 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:31:34:897  INFO 14940 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3318 ms
13:31:35:322  INFO 14940 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:31:35:683  INFO 14940 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:31:36:369  INFO 14940 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:31:36:636 DEBUG 14940 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:31:37:402  INFO 14940 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:31:37:700  INFO 14940 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:31:37:711  WARN 14940 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'patientController' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\controller\PatientController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
13:31:37:762  INFO 14940 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
13:31:37:765  WARN 14940 --- [main] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [Thread-8] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.11/sun.net.dns.ResolverConfigurationImpl.notifyAddrChange0(Native Method)
 java.base@17.0.11/sun.net.dns.ResolverConfigurationImpl$AddressChangeListener.run(ResolverConfigurationImpl.java:176)
13:31:37:779  INFO 14940 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
13:31:37:806 ERROR 14940 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'patientController' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\controller\PatientController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.7.12.jar:2.7.12]
	at com.luojiawei.his_service.HisServiceApplication.main(HisServiceApplication.java:21) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:315) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:296) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.27.jar:5.3.27]
	... 19 common frames omitted
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311) ~[spring-beans-5.3.27.jar:5.3.27]
	... 33 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[na:na]
	at java.base/java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:1541) ~[na:na]
	at java.base/java.lang.ClassLoader.getClassLoadingLock(ClassLoader.java:671) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:651) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525) ~[na:na]
	at com.zaxxer.hikari.HikariConfig.attemptFromContextLoader(HikariConfig.java:967) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:477) ~[HikariCP-5.0.1.jar:na]
	at com.luojiawei.his_service.service.impl.PatientServiceImpl.<clinit>(PatientServiceImpl.java:69) ~[classes/:na]
	... 41 common frames omitted

13:32:27:887  INFO 30984 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 30984 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:32:27:888 DEBUG 30984 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:32:27:889  INFO 30984 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:32:28:625 DEBUG 30984 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:32:28:626 DEBUG 30984 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:32:28:942  INFO 30984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:32:28:945  INFO 30984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:32:28:970  INFO 30984 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
13:32:29:233  INFO 30984 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:32:29:813  INFO 30984 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:32:29:822  INFO 30984 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:32:29:822  INFO 30984 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:32:29:982  INFO 30984 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:32:29:982  INFO 30984 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2039 ms
13:32:30:389  INFO 30984 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:32:30:791  INFO 30984 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:32:31:524  INFO 30984 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:32:31:801 DEBUG 30984 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:32:32:543  INFO 30984 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:32:32:815  INFO 30984 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:32:34:050  WARN 30984 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:32:34:062  INFO 30984 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:32:34:156  INFO 30984 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
13:32:34:223  INFO 30984 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:32:34:223  INFO 30984 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:32:37:146  INFO 30984 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:32:37:151  INFO 30984 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:32:37:151  INFO 30984 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:32:37:152  INFO 30984 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:32:37:251  INFO 30984 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:32:37:463  INFO 30984 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 10.458 seconds (JVM running for 11.44)
13:32:38:031  INFO 30984 --- [RMI TCP Connection(2)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:32:38:032  INFO 30984 --- [RMI TCP Connection(2)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:32:38:034  INFO 30984 --- [RMI TCP Connection(2)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
13:32:38:037  INFO 30984 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:32:38:699  INFO 30984 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@56f4e724
13:32:38:702  INFO 30984 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:34:08:587  WARN 30984 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:34:08:587  WARN 30984 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:34:08:588  WARN 30984 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:34:08:588  WARN 30984 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:34:08:658  INFO 30984 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:34:08:700  INFO 30984 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:34:08:721  INFO 30984 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
13:34:09:098  INFO 30984 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
13:34:16:642  INFO 34472 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 34472 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:34:16:643 DEBUG 34472 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:34:16:644  INFO 34472 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:34:17:426 DEBUG 34472 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:34:17:427 DEBUG 34472 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:34:17:779  INFO 34472 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:34:17:781  INFO 34472 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:34:17:809  INFO 34472 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
13:34:18:073  INFO 34472 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:34:18:669  INFO 34472 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:34:18:680  INFO 34472 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:34:18:681  INFO 34472 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:34:18:844  INFO 34472 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:34:18:844  INFO 34472 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2143 ms
13:34:19:254  INFO 34472 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:34:19:638  INFO 34472 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:34:20:358  INFO 34472 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:34:20:623 DEBUG 34472 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:34:21:340  INFO 34472 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:34:21:612  INFO 34472 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:34:21:625  WARN 34472 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'patientController' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\controller\PatientController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
13:34:21:686  INFO 34472 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
13:34:21:689  WARN 34472 --- [main] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [Thread-8] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.11/sun.net.dns.ResolverConfigurationImpl.notifyAddrChange0(Native Method)
 java.base@17.0.11/sun.net.dns.ResolverConfigurationImpl$AddressChangeListener.run(ResolverConfigurationImpl.java:176)
13:34:21:704  INFO 34472 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
13:34:21:726 ERROR 34472 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'patientController' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\controller\PatientController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.7.12.jar:2.7.12]
	at com.luojiawei.his_service.HisServiceApplication.main(HisServiceApplication.java:21) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:315) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:296) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.27.jar:5.3.27]
	... 19 common frames omitted
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311) ~[spring-beans-5.3.27.jar:5.3.27]
	... 33 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[na:na]
	at java.base/java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:1541) ~[na:na]
	at java.base/java.lang.ClassLoader.getClassLoadingLock(ClassLoader.java:671) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:651) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525) ~[na:na]
	at com.zaxxer.hikari.HikariConfig.attemptFromContextLoader(HikariConfig.java:967) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:477) ~[HikariCP-5.0.1.jar:na]
	at com.luojiawei.his_service.service.impl.PatientServiceImpl.<clinit>(PatientServiceImpl.java:70) ~[classes/:na]
	... 41 common frames omitted

13:34:39:075  INFO 6468 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 6468 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:34:39:076 DEBUG 6468 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:34:39:076  INFO 6468 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:34:39:879 DEBUG 6468 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:34:39:880 DEBUG 6468 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:34:40:201  INFO 6468 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:34:40:203  INFO 6468 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:34:40:233  INFO 6468 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
13:34:40:492  INFO 6468 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:34:41:080  INFO 6468 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
13:34:41:088  INFO 6468 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:34:41:088  INFO 6468 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:34:41:232  INFO 6468 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:34:41:232  INFO 6468 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2098 ms
13:34:41:621  INFO 6468 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:34:41:997  INFO 6468 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:34:42:731  INFO 6468 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:34:43:029 DEBUG 6468 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:34:43:889  INFO 6468 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:34:44:195  INFO 6468 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:34:45:656  WARN 6468 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:34:45:660  INFO 6468 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:34:45:748  INFO 6468 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
13:34:45:788  INFO 6468 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:34:45:788  INFO 6468 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:34:46:735  INFO 6468 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:34:46:737  INFO 6468 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:34:46:737  INFO 6468 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:34:46:738  INFO 6468 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:34:46:831  INFO 6468 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:34:47:035  INFO 6468 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 8.823 seconds (JVM running for 9.844)
13:34:47:555  INFO 6468 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:34:47:588  INFO 6468 --- [RMI TCP Connection(3)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:34:47:588  INFO 6468 --- [RMI TCP Connection(3)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:34:47:591  INFO 6468 --- [RMI TCP Connection(3)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
13:34:48:213  INFO 6468 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@537274d8
13:34:48:217  INFO 6468 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:35:00:935  INFO 32036 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 32036 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:35:00:937 DEBUG 32036 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:35:00:937  INFO 32036 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:35:01:677 DEBUG 32036 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:35:01:677 DEBUG 32036 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:35:01:980  INFO 32036 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:35:01:984  INFO 32036 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:35:02:016  INFO 32036 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
13:35:02:270  INFO 32036 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:35:02:858  INFO 32036 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)
13:35:02:866  INFO 32036 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:35:02:867  INFO 32036 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:35:03:018  INFO 32036 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:35:03:018  INFO 32036 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2026 ms
13:35:03:448  INFO 32036 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:35:03:900  INFO 32036 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:35:04:596  INFO 32036 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:35:04:895 DEBUG 32036 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:35:05:823  INFO 32036 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:35:06:157  INFO 32036 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:35:06:179  WARN 32036 --- [main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'patientController' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\controller\PatientController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
13:35:06:241  INFO 32036 --- [main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
13:35:06:247  WARN 32036 --- [main] o.a.c.loader.WebappClassLoaderBase       : The web application [ROOT] appears to have started a thread named [Thread-8] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.11/sun.net.dns.ResolverConfigurationImpl.notifyAddrChange0(Native Method)
 java.base@17.0.11/sun.net.dns.ResolverConfigurationImpl$AddressChangeListener.run(ResolverConfigurationImpl.java:176)
13:35:06:264  INFO 32036 --- [main] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
13:35:06:290 ERROR 32036 --- [main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'patientController' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\controller\PatientController.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:920) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.27.jar:5.3.27]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1303) ~[spring-boot-2.7.12.jar:2.7.12]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1292) ~[spring-boot-2.7.12.jar:2.7.12]
	at com.luojiawei.his_service.HisServiceApplication.main(HisServiceApplication.java:21) ~[classes/:na]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'patientServiceImpl' defined in file [A:\Desktop\workspace\HIS\his_service\target\classes\com\luojiawei\his_service\service\impl\PatientServiceImpl.class]: Bean instantiation via constructor failed; nested exception is java.lang.ExceptionInInitializerError
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:315) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:296) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1391) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791) ~[spring-beans-5.3.27.jar:5.3.27]
	... 19 common frames omitted
Caused by: java.lang.ExceptionInInitializerError: null
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499) ~[na:na]
	at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480) ~[na:na]
	at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:211) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:117) ~[spring-beans-5.3.27.jar:5.3.27]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:311) ~[spring-beans-5.3.27.jar:5.3.27]
	... 33 common frames omitted
Caused by: java.lang.NullPointerException: null
	at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1011) ~[na:na]
	at java.base/java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:1541) ~[na:na]
	at java.base/java.lang.ClassLoader.getClassLoadingLock(ClassLoader.java:671) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:651) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525) ~[na:na]
	at com.zaxxer.hikari.HikariConfig.attemptFromContextLoader(HikariConfig.java:967) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.HikariConfig.setDriverClassName(HikariConfig.java:477) ~[HikariCP-5.0.1.jar:na]
	at com.luojiawei.his_service.service.impl.PatientServiceImpl.<clinit>(PatientServiceImpl.java:70) ~[classes/:na]
	... 41 common frames omitted

13:36:36:716  INFO 34008 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 34008 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:36:36:718 DEBUG 34008 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:36:36:718  INFO 34008 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:36:37:844 DEBUG 34008 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:36:37:845 DEBUG 34008 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:36:38:359  INFO 34008 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:36:38:364  INFO 34008 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:36:38:410  INFO 34008 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
13:36:38:835  INFO 34008 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:36:39:651  INFO 34008 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)
13:36:39:663  INFO 34008 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:36:39:664  INFO 34008 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:36:39:865  INFO 34008 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:36:39:866  INFO 34008 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3061 ms
13:36:40:443  INFO 34008 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:36:40:939  INFO 34008 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:36:41:668  INFO 34008 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:36:42:062 DEBUG 34008 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:36:43:096  INFO 34008 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:36:43:472  INFO 34008 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:36:43:489  INFO 34008 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:36:44:098  INFO 34008 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@478cc5f1
13:36:44:100  INFO 34008 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:36:45:726  WARN 34008 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:36:45:732  INFO 34008 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:36:45:845  INFO 34008 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path ''
13:36:45:891  INFO 34008 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:36:45:891  INFO 34008 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:36:47:014  INFO 34008 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:36:47:017  INFO 34008 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:36:47:018  INFO 34008 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:36:47:019  INFO 34008 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:36:47:120  INFO 34008 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:36:47:392  INFO 34008 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 11.798 seconds (JVM running for 13.176)
13:36:47:861  INFO 34008 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:36:47:880  INFO 34008 --- [RMI TCP Connection(3)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:36:47:880  INFO 34008 --- [RMI TCP Connection(3)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:36:47:883  INFO 34008 --- [RMI TCP Connection(3)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
13:36:48:216  INFO 34008 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@670776
13:36:48:220  INFO 34008 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
13:40:00:287 DEBUG 34008 --- [http-nio-8081-exec-3] c.l.h.m.PatientMapper.selectIdByOpenId   : ==>  Preparing: select id, open_id, phone, name, verified, hospital_pid from patient where open_id = ?
13:40:00:319 DEBUG 34008 --- [http-nio-8081-exec-3] c.l.h.m.PatientMapper.selectIdByOpenId   : ==> Parameters: owhoa7fITbB2gA1N4dxwWmjN8Xsw(String)
13:40:00:385 DEBUG 34008 --- [http-nio-8081-exec-3] c.l.h.m.PatientMapper.selectIdByOpenId   : <==      Total: 1
13:40:09:718 DEBUG 34008 --- [http-nio-8081-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
13:40:09:719 DEBUG 34008 --- [http-nio-8081-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Long)
13:40:09:755 DEBUG 34008 --- [http-nio-8081-exec-4] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
13:40:10:392 DEBUG 34008 --- [http-nio-8081-exec-4] c.l.h.mapper.PatientMapper.updateById    : ==>  Preparing: UPDATE patient SET phone=?, id_card=?, name=?, verified=?, verified_by=?, verified_time=?, open_id=?, hospital_pid=?, city=?, province=?, county=?, sex=?, birthday=?, age=? WHERE id=?
13:40:10:394 DEBUG 34008 --- [http-nio-8081-exec-4] c.l.h.mapper.PatientMapper.updateById    : ==> Parameters: 13711111111(String), 360302200410122519(String), 罗佳炜(String), 1(Integer), 审核人B(String), 2025-04-10T10:00(LocalDateTime), owhoa7fITbB2gA1N4dxwWmjN8Xsw(String), 1(String), 萍乡市(String), 江西省(String), 安源区(String), 男(String), 20041012(String), 21(Integer), 3(Integer)
13:40:10:467 DEBUG 34008 --- [http-nio-8081-exec-4] c.l.h.mapper.PatientMapper.updateById    : <==    Updates: 1
13:43:47:478  WARN 34008 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
13:43:47:478  WARN 34008 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
13:43:47:478  WARN 34008 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
13:43:47:479  WARN 34008 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
13:43:47:558  INFO 34008 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
13:43:47:607  INFO 34008 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
13:43:47:627  INFO 34008 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
13:43:47:938  INFO 34008 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
13:43:56:163  INFO 26396 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 26396 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
13:43:56:164 DEBUG 26396 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
13:43:56:165  INFO 26396 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
13:43:56:990 DEBUG 26396 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
13:43:56:991 DEBUG 26396 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
13:43:57:347  INFO 26396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
13:43:57:350  INFO 26396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
13:43:57:387  INFO 26396 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 0 Redis repository interfaces.
13:43:57:709  INFO 26396 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
13:43:58:380  INFO 26396 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8081 (http)
13:43:58:395  INFO 26396 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
13:43:58:395  INFO 26396 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
13:43:58:558  INFO 26396 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
13:43:58:558  INFO 26396 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2330 ms
13:43:58:952  INFO 26396 --- [main] org.redisson.Version                     : Redisson 3.17.7
13:43:59:407  INFO 26396 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
13:44:00:121  INFO 26396 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
13:44:00:462 DEBUG 26396 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
13:44:01:318  INFO 26396 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
13:44:01:749  INFO 26396 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
13:44:01:780  INFO 26396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
13:44:02:404  INFO 26396 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@37b1218
13:44:02:406  INFO 26396 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
13:44:04:388  WARN 26396 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
13:44:04:400  INFO 26396 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
13:44:04:570  INFO 26396 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8081 (http) with context path ''
13:44:04:617  INFO 26396 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
13:44:04:617  INFO 26396 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
13:44:05:974  INFO 26396 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
13:44:05:978  INFO 26396 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
13:44:05:981  INFO 26396 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
13:44:05:982  INFO 26396 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
13:44:06:136  INFO 26396 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
13:44:06:336  INFO 26396 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 11.051 seconds (JVM running for 12.077)
13:44:06:660  INFO 26396 --- [RMI TCP Connection(1)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
13:44:06:660  INFO 26396 --- [RMI TCP Connection(1)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
13:44:06:663  INFO 26396 --- [RMI TCP Connection(1)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
13:44:06:686  INFO 26396 --- [RMI TCP Connection(3)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
13:44:07:019  INFO 26396 --- [RMI TCP Connection(3)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7e14fce9
13:44:07:022  INFO 26396 --- [RMI TCP Connection(3)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
14:50:24:560  WARN 26396 --- [http-nio-8081-exec-1] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'page' for method parameter type Integer is present but converted to null]
14:50:30:742 DEBUG 26396 --- [http-nio-8081-exec-3] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
14:50:30:788 DEBUG 26396 --- [http-nio-8081-exec-3] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 1(String)
14:50:30:854 DEBUG 26396 --- [http-nio-8081-exec-3] c.l.h.m.D.getDiagnosisList               : <==      Total: 0
14:50:36:260 DEBUG 26396 --- [http-nio-8081-exec-5] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
14:50:36:261 DEBUG 26396 --- [http-nio-8081-exec-5] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
14:50:36:300 DEBUG 26396 --- [http-nio-8081-exec-5] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
14:54:36:620  WARN 6468 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
14:54:36:620  WARN 6468 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
14:54:36:622  WARN 6468 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
14:54:36:626  WARN 26396 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
14:54:36:626  WARN 26396 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
14:54:36:627  WARN 26396 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
14:54:36:628  WARN 26396 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
14:54:36:629  WARN 6468 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
14:54:36:701  INFO 6468 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
14:54:36:711  INFO 26396 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
14:54:36:738  INFO 6468 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
14:54:36:752  INFO 26396 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
14:54:36:780  INFO 6468 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
14:54:36:787  INFO 26396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
14:54:37:107  INFO 6468 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
14:54:37:110  INFO 26396 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
14:54:49:178  INFO 34656 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 34656 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
14:54:49:180 DEBUG 34656 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
14:54:49:180  INFO 34656 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
14:54:50:306 DEBUG 34656 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
14:54:50:317 DEBUG 34656 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
14:54:50:644  INFO 34656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
14:54:50:647  INFO 34656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:54:50:675  INFO 34656 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
14:54:50:936  INFO 34656 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
14:54:52:542  INFO 34656 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
14:54:52:570  INFO 34656 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:54:52:571  INFO 34656 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:54:52:791  INFO 34656 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:54:52:792  INFO 34656 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3557 ms
14:54:53:179  INFO 34656 --- [main] org.redisson.Version                     : Redisson 3.17.7
14:54:53:552  INFO 34656 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
14:54:54:286  INFO 34656 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
14:54:54:558 DEBUG 34656 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
14:54:55:555  INFO 34656 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
14:54:55:893  INFO 34656 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
14:54:55:917  INFO 34656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
14:54:56:529  INFO 34656 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@18918d70
14:54:56:531  INFO 34656 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
14:54:57:862  WARN 34656 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
14:54:57:866  INFO 34656 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
14:54:57:973  INFO 34656 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
14:54:58:039  INFO 34656 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
14:54:58:039  INFO 34656 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
14:55:00:773  INFO 34656 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
14:55:00:774  INFO 34656 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
14:55:00:774  INFO 34656 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
14:55:00:775  INFO 34656 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
14:55:00:862  INFO 34656 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
14:55:01:049  INFO 34656 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 12.926 seconds (JVM running for 20.451)
14:55:23:122  INFO 34656 --- [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
14:55:23:123  INFO 34656 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
14:55:23:124  INFO 34656 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
14:55:23:280  INFO 34656 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
14:55:23:613  INFO 34656 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@78bc92e2
14:55:23:616  INFO 34656 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
14:55:23:625 DEBUG 34656 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
14:55:23:656 DEBUG 34656 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
14:55:23:719 DEBUG 34656 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
14:55:39:883 DEBUG 34656 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
14:55:39:884 DEBUG 34656 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
14:55:39:916 DEBUG 34656 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
14:55:50:428 DEBUG 34656 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
14:55:50:429 DEBUG 34656 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
14:55:50:462 DEBUG 34656 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
14:56:43:754  WARN 34656 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
14:56:43:754  WARN 34656 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
14:56:43:755  WARN 34656 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
14:56:43:756  WARN 34656 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
14:56:43:800  INFO 34656 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
14:56:43:832  INFO 34656 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
14:56:43:848  INFO 34656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
14:56:44:157  INFO 34656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
14:56:48:436  INFO 3688 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 3688 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
14:56:48:437 DEBUG 3688 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
14:56:48:438  INFO 3688 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
14:56:49:177 DEBUG 3688 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
14:56:49:177 DEBUG 3688 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
14:56:49:490  INFO 3688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
14:56:49:492  INFO 3688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:56:49:521  INFO 3688 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
14:56:49:763  INFO 3688 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
14:56:50:422  INFO 3688 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
14:56:50:431  INFO 3688 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:56:50:431  INFO 3688 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:56:50:596  INFO 3688 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:56:50:597  INFO 3688 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2104 ms
14:56:51:015  INFO 3688 --- [main] org.redisson.Version                     : Redisson 3.17.7
14:56:51:454  INFO 3688 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
14:56:52:169  INFO 3688 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
14:56:52:470 DEBUG 3688 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
14:56:53:147  INFO 3688 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
14:56:53:481  INFO 3688 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
14:56:53:503  INFO 3688 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
14:56:54:060  INFO 3688 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@245b0bd7
14:56:54:062  INFO 3688 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
14:56:55:374  WARN 3688 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
14:56:55:378  INFO 3688 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
14:56:55:458  INFO 3688 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
14:56:55:495  INFO 3688 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
14:56:55:495  INFO 3688 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
14:56:56:501  INFO 3688 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
14:56:56:502  INFO 3688 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
14:56:56:503  INFO 3688 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
14:56:56:503  INFO 3688 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
14:56:56:612  INFO 3688 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
14:56:56:861  INFO 3688 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 9.402 seconds (JVM running for 10.586)
14:56:57:331  INFO 3688 --- [RMI TCP Connection(2)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
14:56:57:331  INFO 3688 --- [RMI TCP Connection(2)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
14:56:57:334  INFO 3688 --- [RMI TCP Connection(2)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
14:56:57:336  INFO 3688 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
14:56:57:677  INFO 3688 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1933fc74
14:56:57:682  INFO 3688 --- [RMI TCP Connection(1)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
14:57:23:285  WARN 3688 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
14:57:23:285  WARN 3688 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
14:57:23:285  WARN 3688 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
14:57:23:286  WARN 3688 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
14:57:23:337  INFO 3688 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
14:57:23:374  INFO 3688 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
14:57:23:389  INFO 3688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
14:57:23:702  INFO 3688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
14:57:30:447  INFO 22976 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 22976 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
14:57:30:448 DEBUG 22976 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
14:57:30:448  INFO 22976 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
14:57:31:142 DEBUG 22976 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
14:57:31:143 DEBUG 22976 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
14:57:31:490  INFO 22976 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
14:57:31:493  INFO 22976 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
14:57:31:524  INFO 22976 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
14:57:31:783  INFO 22976 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
14:57:32:405  INFO 22976 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
14:57:32:414  INFO 22976 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
14:57:32:414  INFO 22976 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
14:57:32:572  INFO 22976 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
14:57:32:573  INFO 22976 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2079 ms
14:57:32:973  INFO 22976 --- [main] org.redisson.Version                     : Redisson 3.17.7
14:57:33:363  INFO 22976 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
14:57:34:058  INFO 22976 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
14:57:34:355 DEBUG 22976 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
14:57:35:109  INFO 22976 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
14:57:35:401  INFO 22976 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
14:57:35:411  INFO 22976 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
14:57:35:953  INFO 22976 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@613a608e
14:57:35:954  INFO 22976 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
14:57:37:533  WARN 22976 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
14:57:37:539  INFO 22976 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
14:57:37:665  INFO 22976 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
14:57:37:726  INFO 22976 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
14:57:37:726  INFO 22976 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
14:57:38:778  INFO 22976 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
14:57:38:779  INFO 22976 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
14:57:38:780  INFO 22976 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
14:57:38:781  INFO 22976 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
14:57:38:880  INFO 22976 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
14:57:39:090  INFO 22976 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 9.501 seconds (JVM running for 10.513)
14:57:39:506  INFO 22976 --- [RMI TCP Connection(1)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
14:57:39:506  INFO 22976 --- [RMI TCP Connection(1)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
14:57:39:509  INFO 22976 --- [RMI TCP Connection(1)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
14:57:39:518  INFO 22976 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
14:57:39:862  INFO 22976 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3aa04c1
14:57:39:865  INFO 22976 --- [RMI TCP Connection(2)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
14:57:40:491 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
14:57:40:519 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
14:57:40:594 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
14:58:10:624 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
14:58:10:624 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==> Parameters: 1(Integer)
14:58:10:677 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : <==      Total: 1
14:58:10:677 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
14:58:10:677 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 2001(Integer)
14:58:10:709 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
14:58:10:718 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
14:58:10:718 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3001(Integer)
14:58:10:750 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
14:58:10:755 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
14:58:10:756 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 1(Integer)
14:58:10:791 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 31
14:58:10:792 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
14:58:10:792 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 1(Integer)
14:58:10:828 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 17
14:58:10:845 ERROR 22976 --- [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17] with root cause

org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:81) ~[mybatis-3.5.13.jar:3.5.13]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectOne(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy134.selectByDiagnosisId(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:91) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$3bd98136.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.DiagnosisReportController.diagnosisReport(DiagnosisReportController.java:52) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:33) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

14:58:15:665 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
14:58:15:665 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
14:58:15:697 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : <==      Total: 1
14:58:15:697 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
14:58:15:698 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
14:58:15:730 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
14:58:15:730 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
14:58:15:731 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
14:58:15:763 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
14:58:15:763 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
14:58:15:764 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 3(Integer)
14:58:15:794 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
14:58:15:795 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
14:58:15:795 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 3(Integer)
14:58:15:826 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 1
14:58:15:826 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
14:58:15:826 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 3(Integer)
14:58:15:858 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
14:58:15:859 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
14:58:15:859 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 3(Integer)
14:58:15:896 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
14:59:11:228  WARN 22976 --- [http-nio-8080-exec-6] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'page' for method parameter type Integer is present but converted to null]
14:59:15:128 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
14:59:15:129 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 1(String)
14:59:15:161 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : <==      Total: 0
14:59:20:410 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
14:59:20:411 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==> Parameters: (String)
14:59:20:490 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : <==      Total: 0
14:59:23:535 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
14:59:23:535 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
14:59:23:569 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:00:06:583 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:00:06:584 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:00:06:616 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:00:10:599 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:00:10:600 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:00:10:647 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:00:28:701 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:00:28:706 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:00:28:749 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:11:12:913 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:11:12:914 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:11:12:945 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : <==      Total: 1
15:11:12:946 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:11:12:946 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:11:12:978 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:11:12:978 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:11:12:979 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:11:13:010 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:11:13:010 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:11:13:011 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:11:13:047 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:11:13:047 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:11:13:047 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:11:13:078 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:11:13:078 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:11:13:078 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:11:13:110 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:11:13:111 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:11:13:111 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:11:13:148 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:13:41:267  WARN 22976 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m35s45ms407µs400ns).
15:13:41:271  WARN 22976 --- [HikariPool-2 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=2m31s90ms115µs200ns).
15:13:41:313 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:13:41:314 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:13:41:345 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:13:41:351 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisHistory            : ==>  Preparing: SELECT d.id, d.disease_name, d.disease_category, d.create_time, d.status, d.result, d2.name, a.version AS model_version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id JOIN doctor d2 ON d.doctor_id = d2.id ORDER BY create_time Desc
15:13:41:351 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisHistory            : ==> Parameters: 
15:13:41:381 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.getDiagnosisHistory            : ==>  Preparing: SELECT d.id, d.disease_name, d.disease_category, d.create_time, d.status, d.result, d2.name, a.version AS model_version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id JOIN doctor d2 ON d.doctor_id = d2.id ORDER BY create_time Desc
15:13:41:382 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.getDiagnosisHistory            : ==> Parameters: 
15:13:41:527 ERROR 22976 --- [http-nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
### The error may exist in file [A:\Desktop\workspace\HIS\his_service\target\classes\mapper\DiagnosisReportMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT         d.id,         d.disease_name,         d.disease_category,         d.create_time,         d.status,         d.result,         d2.name,         a.version AS model_version         FROM         diagnosis_report d         JOIN         ai_model a ON d.aimodel_id = a.id         JOIN         doctor d2 ON d.doctor_id = d2.id                    ORDER BY create_time Desc
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'] with root cause

java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.proxy3/jdk.proxy3.$Proxy168.execute(Unknown Source) ~[na:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:333) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.13.jar:3.5.13]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForIPage(MybatisMapperMethod.java:121) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:85) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy130.getDiagnosisHistory(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisHistory(DiagnosisReportServiceImpl.java:57) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$3bd98136.diagnosisHistory(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.DiagnosisReportController.diagnosisHistory(DiagnosisReportController.java:46) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:13:41:528 ERROR 22976 --- [http-nio-8080-exec-8] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
### The error may exist in file [A:\Desktop\workspace\HIS\his_service\target\classes\mapper\DiagnosisReportMapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT         d.id,         d.disease_name,         d.disease_category,         d.create_time,         d.status,         d.result,         d2.name,         a.version AS model_version         FROM         diagnosis_report d         JOIN         ai_model a ON d.aimodel_id = a.id         JOIN         doctor d2 ON d.doctor_id = d2.id                    ORDER BY create_time Desc
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'] with root cause

java.sql.SQLSyntaxErrorException: Unknown column 'd.disease_name' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354) ~[mysql-connector-j-8.0.33.jar:8.0.33]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]
	at jdk.internal.reflect.GeneratedMethodAccessor50.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.proxy3/jdk.proxy3.$Proxy168.execute(Unknown Source) ~[na:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:333) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147) ~[mybatis-3.5.13.jar:3.5.13]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142) ~[mybatis-3.5.13.jar:3.5.13]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectList(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForIPage(MybatisMapperMethod.java:121) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:85) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy130.getDiagnosisHistory(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisHistory(DiagnosisReportServiceImpl.java:57) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$3bd98136.diagnosisHistory(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.DiagnosisReportController.diagnosisHistory(DiagnosisReportController.java:46) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:529) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:28:22:202 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:28:22:215 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:28:22:249 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:28:40:142 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:28:40:142 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 1(Integer)
15:28:40:176 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
15:28:40:176 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:28:40:177 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 2001(Integer)
15:28:40:210 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:28:40:211 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:28:40:211 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3001(Integer)
15:28:40:245 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:28:40:245 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:28:40:246 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 1(Integer)
15:28:40:280 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 31
15:28:40:280 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:28:40:281 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 1(Integer)
15:28:40:315 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 17
15:28:40:319 ERROR 22976 --- [http-nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17] with root cause

org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:81) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.internal.reflect.GeneratedMethodAccessor74.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectOne(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy134.selectByDiagnosisId(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:91) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$3bd98136.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:28:52:845 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:28:52:846 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==> Parameters: 1(Integer)
15:28:52:879 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : <==      Total: 1
15:28:52:879 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:28:52:879 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 2001(Integer)
15:28:52:924 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:28:52:925 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:28:52:925 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3001(Integer)
15:28:52:960 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:28:52:960 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:28:52:961 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 1(Integer)
15:28:52:995 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 31
15:28:52:996 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:28:52:996 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 1(Integer)
15:28:53:031 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 17
15:28:53:035 ERROR 22976 --- [http-nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17] with root cause

org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to be returned by selectOne(), but found: 17
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectOne(DefaultSqlSession.java:81) ~[mybatis-3.5.13.jar:3.5.13]
	at jdk.internal.reflect.GeneratedMethodAccessor74.invoke(Unknown Source) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at jdk.proxy2/jdk.proxy2.$Proxy113.selectOne(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.selectOne(SqlSessionTemplate.java:160) ~[mybatis-spring-2.1.1.jar:2.1.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:148) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89) ~[mybatis-plus-core-3.5.3.1.jar:3.5.3.1]
	at jdk.proxy2/jdk.proxy2.$Proxy134.selectByDiagnosisId(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl.diagnosisReport(DiagnosisReportServiceImpl.java:91) ~[classes/:na]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$FastClassBySpringCGLIB$$c65c6ec3.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.invokeMethod(CglibAopProxy.java:386) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy.access$000(CglibAopProxy.java:85) ~[spring-aop-5.3.27.jar:5.3.27]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:704) ~[spring-aop-5.3.27.jar:5.3.27]
	at com.luojiawei.his_service.service.impl.DiagnosisReportServiceImpl$$EnhancerBySpringCGLIB$$3bd98136.diagnosisReport(<generated>) ~[classes/:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:31) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:29:59:010 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:29:59:010 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:29:59:046 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:29:59:123 DEBUG 22976 --- [http-nio-8080-exec-5] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:29:59:123 DEBUG 22976 --- [http-nio-8080-exec-5] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:29:59:159 DEBUG 22976 --- [http-nio-8080-exec-5] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:33:41:972 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:33:41:975 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:33:42:009 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:33:49:442 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:33:49:443 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:33:49:477 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:34:06:512 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:34:06:514 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:34:06:548 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:34:48:924 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:34:48:925 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:34:48:965 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:34:54:281 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:34:54:282 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:34:54:315 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:36:45:337 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:36:45:338 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:36:45:373 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:36:51:440 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:36:51:442 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:36:51:476 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:36:57:875 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:36:57:876 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:36:57:912 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:37:59:413 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:37:59:414 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:37:59:448 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:38:15:992 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:38:15:992 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:38:16:025 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
15:38:16:025 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:38:16:026 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:38:16:059 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:38:16:059 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:38:16:060 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:38:16:093 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:38:16:093 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:38:16:094 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:38:16:127 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:38:16:128 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:38:16:130 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:38:16:165 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:38:16:166 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:38:16:166 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:38:16:212 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:38:16:213 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:38:16:213 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:38:16:246 DEBUG 22976 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:38:25:322 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:38:25:323 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:38:25:358 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : <==      Total: 1
15:38:25:358 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:38:25:358 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:38:25:392 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:38:25:393 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:38:25:394 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:38:25:428 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:38:25:429 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:38:25:429 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:38:25:463 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:38:25:463 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:38:25:463 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:38:25:495 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:38:25:496 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:38:25:496 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:38:25:531 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:38:25:531 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:38:25:532 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:38:25:566 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:38:25:668 DEBUG 22976 --- [http-nio-8080-exec-3] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=null, medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=assistant, content=您好！我是您的眼疾诊断AI助手。您的诊断结果是"诊断结果G"，我可以回答您关于这份诊断报告的任何问题。), DialogueInfo(role=user, content=草泥马)], question=草泥马, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@24a1858a]
15:38:25:685 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:38:25:685 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 644
15:38:25:685 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:38:25:685 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:38:25:685 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"assistant","content":"您好！我是您的眼疾诊断AI助手。您的诊断结果是\"诊断结果G\"，我可以回答您关于这份诊断报告的任何问题。"},{"role":"user","content":"草泥马"}],"question":"草泥马","stream":false}
15:38:25:685 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (644-byte body)
15:38:26:469 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 500 Internal Server Error (783ms)
15:38:26:470 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 93
15:38:26:470 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:38:26:470 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:38:25 GMT
15:38:26:470 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:38:26:470 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:38:26:472 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}
15:38:26:472 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (93-byte body)
15:38:26:488 ERROR 22976 --- [http-nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 Internal Server Error] during [POST] to [http://ai-doctor-service/api/eye-doctor/chat] [FastAPIAiDoctorClient#eye_doctor_chat(ChatForm)]: [{"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}]] with root cause

feign.FeignException$InternalServerError: [500 Internal Server Error] during [POST] to [http://ai-doctor-service/api/eye-doctor/chat] [FastAPIAiDoctorClient#eye_doctor_chat(ChatForm)]: [{"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.10.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.10.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.10.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.10.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:98) ~[feign-core-11.10.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:141) ~[feign-core-11.10.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:91) ~[feign-core-11.10.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.10.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy137.eye_doctor_chat(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:45) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:40:12:380  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6f14bc30 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:389  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@6d2a591 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:390  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@70ea9b91 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:392  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3ad54c80 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:393  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@2fdc586b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:395  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@3cb18e2c (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:396  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@1823bc38 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:398  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@80242f0 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:400  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@45d04c9b (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:402  WARN 22976 --- [http-nio-8080-exec-4] com.zaxxer.hikari.pool.PoolBase          : HikariPool-2 - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@75206ae3 (No operations allowed after connection closed.). Possibly consider using a shorter maxLifetime value.
15:40:12:725 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:40:12:725 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : ==> Parameters: 3(Integer)
15:40:12:755 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.D.selectById                     : <==      Total: 1
15:40:12:756 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:40:12:756 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 3(Integer)
15:40:12:787 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:40:12:788 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:40:12:788 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 3(Integer)
15:40:12:818 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:40:12:818 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:40:12:818 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 3(Integer)
15:40:12:849 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:40:12:849 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:40:12:849 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 3(Integer)
15:40:12:879 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 1
15:40:12:880 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:40:12:880 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 3(Integer)
15:40:12:909 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:40:12:910 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:40:12:910 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 3(Integer)
15:40:12:941 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:40:12:954 DEBUG 22976 --- [http-nio-8080-exec-4] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果C, diagnosisCategory=诊断结果C, result=诊断结果C, remark=备注C, treatmentPlan=TreatmentPlans(id=3, diagnosisId=3, treatmentType=3, treatmentDetail=激光治疗, startTime=null, endDate=null, doctorId=3, createdTime=2025-04-01T09:00, updatedTime=2025-04-01T09:00), medications=[MedicationRecommendations(id=3, diagnosisId=3, medicationName=药物C, dosage=15mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=3, createdTime=2025-04-01T09:00, updatedTime=2025-04-01T09:00)], previousConversations=[DialogueInfo(role=user, content=这个病严重吗？), DialogueInfo(role=assistant, content=根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。)], question=我需要注意些什么？, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@24a1858a]
15:40:12:957 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:40:12:957 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 1036
15:40:12:957 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:40:12:957 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:40:12:957 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果C","disease_category":"诊断结果C","result":"诊断结果C","remark":"备注C","treatment_plan":{"id":3,"diagnosisId":3,"createdTime":"2025-04-01T09:00:00","updatedTime":"2025-04-01T09:00:00","treatment_type":3,"treatment_detail":"激光治疗"},"medications":[{"id":3,"diagnosis_id":3,"medication_name":"药物C","dosage":"15mg","frequency":"一天一次","side_effects":"无","doctor_id":3,"created_time":"2025-04-01 09:00:00","updated_time":"2025-04-01 09:00:00"}],"previous_conversations":[{"role":"user","content":"这个病严重吗？"},{"role":"assistant","content":"根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。"}],"question":"我需要注意些什么？","stream":false}
15:40:12:957 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (1036-byte body)
15:40:50:377 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (37420ms)
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 3995
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:40:12 GMT
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"response_id":"72df3887-24a1-4a2d-97de-e241441b5309","content":"<think>\n好的，用户之前询问过病情的严重性，现在根据新的检查结果，他们想知道需要注意些什么。首先，用户提供的诊断是诊断结果C，治疗计划是激光治疗，用药信息是药物C。我需要先确保理解这些检查结果的具体含义，但可能这些是占位符，需要基于常见的糖尿病视网膜病变的情况来回答。\n\n用户现在可能处于中度或更严重的阶段，因为提到了激光治疗。之前的回答提到轻度阶段，现在治疗升级，说明病情可能有进展。用户的主要需求是了解日常注意事项，预防病情恶化，确保治疗效果。\n\n需要考虑用户的潜在深层需求，比如如何配合治疗、生活习惯调整、药物使用注意事项等。可能需要分点回答，结构清晰，便于用户理解和执行。\n\n需要强调血糖控制的重要性，因为这是糖尿病视网膜病变管理的基础。血压和血脂也不能忽视。用户可能需要具体的饮食和运动建议，但不要给出具体食谱或运动计划，而是建议咨询专业医生或营养师。\n\n激光治疗后的注意事项，比如避免剧烈运动、保护眼睛、按时复查，这些都很重要。用药方面，尽管副作用标注为无，仍需提醒用户遵医嘱，不随意停药，观察可能的反应。\n\n此外，用户可能担心视力变化，需要提醒及时报告异常症状，如视力下降或闪光感。戒烟限酒也是关键点，可能影响微循环。定期复查的时间间隔可能需要明确，但应根据医生建议，所以建议用户与主治医生确认。\n\n最后，保持积极心态和及时沟通医生的重要性，避免用户因焦虑而影响治疗。需要确保用词温和，专业但易懂，避免引起恐慌，同时强调遵循医疗指导的重要性。\n</think>\n\n\n\n根据您的检查结果和治疗计划，您需要注意以下重要事项：\n\n**一、基础疾病管理**\n1. **血糖控制**：糖化血红蛋白建议控制在7%以下，餐前血糖4.4-7.2mmol/L，餐后<10mmol/L（需根据个体情况与医生确认目标值）\n2. **血压监测**：建议维持在130/80mmHg以下\n3. **血脂管理**：尤其关注低密度脂蛋白（LDL）控制\n\n**二、激光治疗注意事项**\n- 术前3天避免眼部化妆\n- 治疗后可能出现暂时性视物模糊，建议24小时内避免驾驶\n- 治疗后1周内避免剧烈运动（如举重、潜水等）\n- 严格遵医嘱使用术后眼药水\n\n**三、用药规范**\n- 药物C需固定时间服用（建议晨起空腹）\n- 即使未感觉不适也需持续用药\n- 用药期间每3个月需监测肝肾功能\n- 如出现食欲减退或皮肤黄染立即就诊\n\n**四、生活方式调整**\n1. **饮食管理**：\n   - 采用分餐制（每日5-6餐）\n   - 增加深色蔬菜摄入（如羽衣甘蓝、菠菜）\n   - 选择低GI主食（燕麦、藜麦）\n2. **运动建议**：\n   - 每日30分钟有氧运动（如游泳、骑自行车）\n   - 避免屏气用力的无氧运动\n3. **用眼卫生**：\n   - 每用眼20分钟远眺20秒\n   - 阅读时保持30cm以上距离\n   - 避免在颠簸环境中使用电子设备\n\n**五、监测与随访**\n- 每3个月进行OCT和眼底荧光造影检查\n- 每周自查视力（使用标准视力表）\n- 建立血糖波动日记（记录空腹、三餐后2小时血糖值）\n\n**六、预警症状**\n如出现以下情况需24小时内急诊：\n- 突发性视野缺损（如窗帘样遮挡）\n- 持续性闪光感（超过2小时）\n- 单眼视力急剧下降（24小时内下降2行以上）\n\n请特别注意：上述建议需与您的主治医生确认具体执行方案，个体化调整治疗细节。医疗随访的及时性将直接影响预后效果，建议建立固定的复诊提醒系统。","references":[],"created_at":"2025-04-05T07:40:50.369116+00:00"}
15:40:50:378 DEBUG 22976 --- [http-nio-8080-exec-4] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (3995-byte body)
15:42:04:475  WARN 22976 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=52s732ms167µs700ns).
15:42:04:475  WARN 22976 --- [HikariPool-2 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=52s731ms841µs100ns).
15:42:04:511 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:42:04:511 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:42:04:540 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : <==      Total: 1
15:42:04:541 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:42:04:541 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:42:04:571 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:42:04:572 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:42:04:572 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:42:04:601 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:42:04:602 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:42:04:602 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:42:04:631 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:42:04:632 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:42:04:632 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:42:04:662 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:42:04:662 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:42:04:662 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:42:04:691 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:42:04:691 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:42:04:691 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:42:04:721 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:44:34:895  WARN 22976 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m30s419ms787µs600ns).
15:44:34:895  WARN 22976 --- [HikariPool-2 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=2m30s419ms987µs400ns).
15:44:34:900 DEBUG 22976 --- [http-nio-8080-exec-6] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=null, medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=assistant, content=您好！我是您的眼疾诊断AI助手。您的诊断结果是"诊断结果G"，我可以回答您关于这份诊断报告的任何问题。), DialogueInfo(role=user, content=草泥马), DialogueInfo(role=assistant, content=抱歉，发生了错误，请稍后再试。), DialogueInfo(role=user, content=草泥马)], question=草泥马, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@24a1858a]
15:44:34:903 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:44:34:903 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 761
15:44:34:903 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:44:34:903 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:44:34:903 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"assistant","content":"您好！我是您的眼疾诊断AI助手。您的诊断结果是\"诊断结果G\"，我可以回答您关于这份诊断报告的任何问题。"},{"role":"user","content":"草泥马"},{"role":"assistant","content":"抱歉，发生了错误，请稍后再试。"},{"role":"user","content":"草泥马"}],"question":"草泥马","stream":false}
15:44:34:904 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (761-byte body)
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 500 Internal Server Error (9ms)
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 93
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:44:34 GMT
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}
15:44:34:914 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (93-byte body)
15:44:34:917 ERROR 22976 --- [http-nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 Internal Server Error] during [POST] to [http://ai-doctor-service/api/eye-doctor/chat] [FastAPIAiDoctorClient#eye_doctor_chat(ChatForm)]: [{"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}]] with root cause

feign.FeignException$InternalServerError: [500 Internal Server Error] during [POST] to [http://ai-doctor-service/api/eye-doctor/chat] [FastAPIAiDoctorClient#eye_doctor_chat(ChatForm)]: [{"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.10.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.10.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.10.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.10.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:98) ~[feign-core-11.10.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:141) ~[feign-core-11.10.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:91) ~[feign-core-11.10.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.10.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy137.eye_doctor_chat(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:45) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:44:34:922 ERROR 22976 --- [http-nio-8080-exec-6] o.a.c.c.C.[Tomcat].[localhost]           : Exception Processing ErrorPage[errorCode=0, location=/error]

org.apache.catalina.connector.ClientAbortException: java.io.IOException: An established connection was aborted by the software in your host machine
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:309) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:271) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteOutputStream.flush(CoyoteOutputStream.java:118) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.io.FilterOutputStream.flush(FilterOutputStream.java:153) ~[na:na]
	at com.fasterxml.jackson.core.json.UTF8JsonGenerator.flush(UTF8JsonGenerator.java:1187) ~[jackson-core-2.13.5.jar:2.13.5]
	at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:1009) ~[jackson-databind-2.13.5.jar:2.13.5]
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:456) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:104) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:290) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:219) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:135) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:661) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:427) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:357) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:294) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:373) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.status(StandardHostValve.java:237) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:319) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
Caused by: java.io.IOException: An established connection was aborted by the software in your host machine
	at java.base/sun.nio.ch.SocketDispatcher.write0(Native Method) ~[na:na]
	at java.base/sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:54) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:132) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:97) ~[na:na]
	at java.base/sun.nio.ch.IOUtil.write(IOUtil.java:53) ~[na:na]
	at java.base/sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:532) ~[na:na]
	at org.apache.tomcat.util.net.NioChannel.write(NioChannel.java:136) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.doWrite(NioEndpoint.java:1431) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketWrapperBase.doWrite(SocketWrapperBase.java:775) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketWrapperBase.flushBlocking(SocketWrapperBase.java:739) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketWrapperBase.flush(SocketWrapperBase.java:723) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11OutputBuffer$SocketOutputBuffer.flush(Http11OutputBuffer.java:566) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.filters.ChunkedOutputFilter.flush(ChunkedOutputFilter.java:157) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11OutputBuffer.flush(Http11OutputBuffer.java:220) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.flush(Http11Processor.java:1246) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessor.action(AbstractProcessor.java:398) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.Response.action(Response.java:207) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:305) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	... 56 common frames omitted

15:45:18:860 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:45:18:861 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:45:18:890 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:45:21:427 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:45:21:427 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:45:21:457 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : <==      Total: 1
15:45:21:457 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:45:21:458 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:45:21:487 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:45:21:487 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:45:21:488 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:45:21:517 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:45:21:517 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:45:21:517 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:45:21:546 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:45:21:546 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:45:21:546 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:45:21:575 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:45:21:576 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:45:21:576 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:45:21:605 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:45:21:605 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:45:21:606 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:45:21:634 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:46:55:829 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:46:55:829 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:46:55:858 DEBUG 22976 --- [http-nio-8080-exec-2] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:46:58:336 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:46:58:337 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:46:58:366 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.D.selectById                     : <==      Total: 1
15:46:58:367 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:46:58:367 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:46:58:395 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:46:58:396 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:46:58:396 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:46:58:437 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:46:58:438 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:46:58:438 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:46:58:466 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:46:58:466 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:46:58:466 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:46:58:496 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:46:58:496 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:46:58:496 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:46:58:525 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:46:58:525 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:46:58:525 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:46:58:555 DEBUG 22976 --- [http-nio-8080-exec-3] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:48:08:609 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:48:08:609 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:48:08:638 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.D.selectById                     : <==      Total: 1
15:48:08:639 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:48:08:639 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:48:08:667 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:48:08:667 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:48:08:668 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:48:08:698 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:48:08:698 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:48:08:698 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:48:08:727 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:48:08:727 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:48:08:728 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:48:08:757 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:48:08:757 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:48:08:757 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:48:08:786 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:48:08:787 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:48:08:787 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:48:08:816 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:49:10:595  WARN 22976 --- [HikariPool-2 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Thread starvation or clock leap detected (housekeeper delta=1m5s634ms567µs300ns).
15:49:10:595  WARN 22976 --- [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m5s634ms607µs900ns).
15:49:10:600 DEBUG 22976 --- [http-nio-8080-exec-7] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=null, medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=assistant, content=您好！我是您的眼疾诊断AI助手。您的诊断结果是"诊断结果G"，我可以回答您关于这份诊断报告的任何问题。), DialogueInfo(role=user, content=你好)], question=你好, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@24a1858a]
15:49:10:601 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:49:10:601 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 638
15:49:10:601 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:49:10:601 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:49:10:601 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"assistant","content":"您好！我是您的眼疾诊断AI助手。您的诊断结果是\"诊断结果G\"，我可以回答您关于这份诊断报告的任何问题。"},{"role":"user","content":"你好"}],"question":"你好","stream":false}
15:49:10:601 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (638-byte body)
15:49:10:612 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 500 Internal Server Error (11ms)
15:49:10:612 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 93
15:49:10:613 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:49:10:613 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:49:10 GMT
15:49:10:613 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:49:10:613 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:49:10:613 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}
15:49:10:613 DEBUG 22976 --- [http-nio-8080-exec-7] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (93-byte body)
15:49:10:615 ERROR 22976 --- [http-nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is feign.FeignException$InternalServerError: [500 Internal Server Error] during [POST] to [http://ai-doctor-service/api/eye-doctor/chat] [FastAPIAiDoctorClient#eye_doctor_chat(ChatForm)]: [{"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}]] with root cause

feign.FeignException$InternalServerError: [500 Internal Server Error] during [POST] to [http://ai-doctor-service/api/eye-doctor/chat] [FastAPIAiDoctorClient#eye_doctor_chat(ChatForm)]: [{"detail":"Error processing eye doctor request: argument of type 'NoneType' is not iterable"}]
	at feign.FeignException.serverErrorStatus(FeignException.java:250) ~[feign-core-11.10.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:197) ~[feign-core-11.10.jar:na]
	at feign.FeignException.errorStatus(FeignException.java:185) ~[feign-core-11.10.jar:na]
	at feign.codec.ErrorDecoder$Default.decode(ErrorDecoder.java:92) ~[feign-core-11.10.jar:na]
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:98) ~[feign-core-11.10.jar:na]
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:141) ~[feign-core-11.10.jar:na]
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:91) ~[feign-core-11.10.jar:na]
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100) ~[feign-core-11.10.jar:na]
	at jdk.proxy2/jdk.proxy2.$Proxy137.eye_doctor_chat(Unknown Source) ~[na:na]
	at com.luojiawei.his_service.controller.ChatController.ask(ChatController.java:45) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.27.jar:5.3.27]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623) ~[tomcat-embed-core-9.0.75.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at com.luojiawei.his_service.filter.RefreshTokenFilter.doFilterInternal(RefreshTokenFilter.java:58) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96) ~[spring-boot-actuator-2.7.12.jar:2.7.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.27.jar:5.3.27]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.27.jar:5.3.27]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.75.jar:9.0.75]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

15:49:10:686 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:49:10:686 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:49:10:688 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:49:10:689 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:49:10:690 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:49:10:690 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:49:10:693 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:49:10:693 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:49:10:725 DEBUG 22976 --- [http-nio-8080-exec-8] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:49:10:725 DEBUG 22976 --- [http-nio-8080-exec-9] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:49:10:725 DEBUG 22976 --- [http-nio-8080-exec-6] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:49:10:725 DEBUG 22976 --- [http-nio-8080-exec-10] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:49:12:207  WARN 22976 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:49:12:208  WARN 22976 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:49:12:210  WARN 22976 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:49:12:228  WARN 22976 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:49:12:315  INFO 22976 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:49:12:349  INFO 22976 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:49:12:367  INFO 22976 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
15:49:12:694  INFO 22976 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
15:49:20:957  INFO 36296 --- [main] c.l.his_service.HisServiceApplication    : Starting HisServiceApplication using Java 17.0.11 on luo with PID 36296 (A:\Desktop\workspace\HIS\his_service\target\classes started by 22407 in A:\Desktop\workspace\HIS)
15:49:20:958 DEBUG 36296 --- [main] c.l.his_service.HisServiceApplication    : Running with Spring Boot v2.7.12, Spring v5.3.27
15:49:20:958  INFO 36296 --- [main] c.l.his_service.HisServiceApplication    : The following 1 profile is active: "dev"
15:49:22:361 DEBUG 36296 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FastAPIAiDoctorClient.class]
15:49:22:373 DEBUG 36296 --- [main] o.s.c.openfeign.FeignClientsRegistrar$1  : Identified candidate component class: file [A:\Desktop\workspace\HIS\his_api\target\classes\com\luojiawei\api\client\FlaskModelAnalyzeClient.class]
15:49:22:826  INFO 36296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
15:49:22:828  INFO 36296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
15:49:22:890  INFO 36296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
15:49:23:170  INFO 36296 --- [main] o.s.cloud.context.scope.GenericScope     : BeanFactory id=950772db-613b-32ea-8b5e-bc41158f3d13
15:49:24:814  INFO 36296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)
15:49:24:841  INFO 36296 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
15:49:24:842  INFO 36296 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.75]
15:49:25:073  INFO 36296 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
15:49:25:073  INFO 36296 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4036 ms
15:49:25:496  INFO 36296 --- [main] org.redisson.Version                     : Redisson 3.17.7
15:49:25:873  INFO 36296 --- [redisson-netty-2-9] o.r.c.pool.MasterPubSubConnectionPool    : 1 connections initialized for 111.230.32.147/111.230.32.147:9631
15:49:26:575  INFO 36296 --- [redisson-netty-2-19] o.r.c.pool.MasterConnectionPool          : 24 connections initialized for 111.230.32.147/111.230.32.147:9631
15:49:27:053 DEBUG 36296 --- [main] c.l.h.filter.RefreshTokenFilter          : Filter 'refreshTokenFilter' configured for use
15:49:28:225  INFO 36296 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'flask-service' URL not provided. Will try picking an instance via load-balancing.
15:49:28:565  INFO 36296 --- [main] o.s.c.openfeign.FeignClientFactoryBean   : For 'ai-doctor-service' URL not provided. Will try picking an instance via load-balancing.
15:49:28:585  INFO 36296 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
15:49:29:159  INFO 36296 --- [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@32f54c2a
15:49:29:160  INFO 36296 --- [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
15:49:30:571  WARN 36296 --- [main] iguration$LoadBalancerCaffeineWarnLogger : Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
15:49:30:577  INFO 36296 --- [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
15:49:30:668  INFO 36296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
15:49:30:711  INFO 36296 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
15:49:30:712  INFO 36296 --- [main] c.a.n.p.a.s.c.ClientAuthPluginManager    : [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
15:49:32:553  INFO 36296 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to get current node abilities...
15:49:32:555  INFO 36296 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Ready to initialize current node abilities, support modes: [SDK_CLIENT]
15:49:32:555  INFO 36296 --- [main] c.a.n.c.a.AbstractAbilityControlManager  : Initialize current abilities finish...
15:49:32:556  INFO 36296 --- [main] c.a.n.c.a.d.NacosAbilityManagerHolder    : [AbilityControlManager] Successfully initialize AbilityControlManager
15:49:32:647  INFO 36296 --- [main] c.a.c.n.registry.NacosServiceRegistry    : nacos registry, DEFAULT_GROUP his-service 10.21.93.70:8848 register finished
15:49:32:850  INFO 36296 --- [main] c.l.his_service.HisServiceApplication    : Started HisServiceApplication in 12.888 seconds (JVM running for 14.159)
15:49:33:241  INFO 36296 --- [RMI TCP Connection(5)-10.21.93.70] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
15:49:33:241  INFO 36296 --- [RMI TCP Connection(5)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
15:49:33:244  INFO 36296 --- [RMI TCP Connection(5)-10.21.93.70] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
15:49:33:247  INFO 36296 --- [RMI TCP Connection(7)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
15:49:33:577  INFO 36296 --- [RMI TCP Connection(7)-10.21.93.70] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@42fa55ed
15:49:33:580  INFO 36296 --- [RMI TCP Connection(7)-10.21.93.70] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
15:49:51:813 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:49:51:839 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:49:51:899 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : <==      Total: 1
15:49:51:900 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:49:51:901 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:49:51:939 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:49:51:952 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:49:51:953 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:49:51:983 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:49:51:998 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:49:51:999 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:49:52:029 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:49:52:030 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:49:52:030 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:49:52:063 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:49:52:064 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:49:52:064 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:49:52:095 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:49:52:096 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:49:52:096 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:49:52:128 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:49:52:153 DEBUG 36296 --- [http-nio-8080-exec-2] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=TreatmentPlans(id=null, diagnosisId=null, treatmentType=null, treatmentDetail=null, startTime=null, endDate=null, doctorId=null, createdTime=null, updatedTime=null), medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=user, content=这个病严重吗？), DialogueInfo(role=assistant, content=根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。)], question=我需要注意些什么？, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@3cd28235]
15:49:52:166 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:49:52:166 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 918
15:49:52:166 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:49:52:167 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:49:52:167 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","treatment_plan":{},"medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"user","content":"这个病严重吗？"},{"role":"assistant","content":"根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。"}],"question":"我需要注意些什么？","stream":false}
15:49:52:167 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (918-byte body)
15:50:21:186 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (29018ms)
15:50:21:186 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 3796
15:50:21:186 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:50:21:186 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:49:52 GMT
15:50:21:186 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:50:21:186 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:50:21:187 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"response_id":"07cea97d-949b-432f-a970-9e39f1c5969d","content":"<think>\n好的，我现在需要处理用户的问题。用户之前询问过关于糖尿病视网膜病变的情况，现在根据新的检查结果，他们问需要注意些什么。首先，我需要仔细查看用户提供的眼底检查结果和相关信息。\n\n当前的诊断结果是诊断结果G，但具体是什么疾病呢？可能用户在这里没有明确说明，或者可能是个占位符。此外，备注提到患者有角膜炎，建议药物治疗，而用药信息是药物E，剂量25mg，一天一次，副作用无。治疗计划显示无治疗计划，这可能意味着当前阶段不需要手术或其他干预，只需药物管理。\n\n用户的问题是“我需要注意些什么？”，需要结合角膜炎和可能的糖尿病视网膜病变来回答。首先，角膜炎通常需要特别注意眼部卫生、避免感染加重，以及正确使用处方药物。同时，用户之前有糖尿病视网膜病变，虽然现在是轻度，但需要控制血糖、定期复查等。\n\n接下来，我需要确保回答准确，但避免使用不确定的诊断，比如诊断结果G可能需要澄清，但用户可能只是用占位符。因此，回答应集中在已知的信息上：角膜炎的护理和糖尿病视网膜病变的管理。需要分点列出注意事项，包括用药、眼部卫生、避免刺激因素、血糖控制、定期复查、观察症状、生活调整和及时就医。同时，强调遵循医生建议的重要性，并提醒不要自行调整药物。\n\n还要注意语气友好、专业，用易懂的语言，避免医学术语过多。可能需要检查药物E是否常用，但用户可能只是示例，所以保持通用建议。确保回答覆盖所有提到的点，并提醒用户即使症状缓解也要完成疗程，防止角膜炎复发或恶化。此外，结合糖尿病的情况，强调全身健康管理的重要性。\n</think>\n\n\n\n根据您提供的检查结果和角膜炎诊断，您需要注意以下事项：\n\n**1. 严格遵医嘱用药**\n- 按时使用医生开具的**药物E**（需确认是否为抗生素/抗病毒/抗真菌眼药水）\n- 即使症状缓解也不要擅自停药，需完成整个疗程\n- 注意药物保存方式（部分眼药需冷藏）\n\n**2. 眼部护理要点**\n- 避免用手揉眼，防止交叉感染\n- 暂停佩戴隐形眼镜直至完全康复\n- 外出时建议佩戴防风沙的防护眼镜\n- 保持毛巾、枕巾等个人用品清洁\n\n**3. 避免刺激因素**\n- 暂停使用眼部化妆品\n- 避免游泳、蒸汽浴等湿润环境\n- 远离烟雾、粉尘等刺激性环境\n- 控制电子屏幕使用时间（建议每20分钟远眺休息）\n\n**4. 糖尿病相关管理**\n- 密切监测血糖水平（建议空腹＜7mmol/L，餐后2小时＜10mmol/L）\n- 注意血压控制（建议＜130/80mmHg）\n- 保持健康饮食（低GI饮食，保证维生素A/C/E摄入）\n\n**5. 复诊观察**\n- 按医嘱定期复查角膜愈合情况\n- 建议每3-6个月进行糖尿病视网膜筛查\n- 如出现眼痛加剧、视力下降、分泌物增多等情况需立即就诊\n\n**6. 生活注意事项**\n- 保证每日7-8小时睡眠，增强免疫力\n- 保持室内空气流通（可使用加湿器保持40-60%湿度）\n- 饮食中增加富含Omega-3的食物（如深海鱼、亚麻籽）\n\n请注意：由于您同时存在角膜炎和糖尿病视网膜病变，这两种情况需要综合管理。建议与主治医生确认药物E的具体成分（可能是抗生素或抗炎药物）及是否需要辅助人工泪液使用。如果正在使用降糖药物，需注意药物间相互作用可能性。","references":[],"created_at":"2025-04-05T07:50:21.171312+00:00"}
15:50:21:188 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (3796-byte body)
15:50:34:238 DEBUG 36296 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:50:34:239 DEBUG 36296 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:50:34:272 DEBUG 36296 --- [http-nio-8080-exec-3] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:50:35:025 DEBUG 36296 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:50:35:025 DEBUG 36296 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:50:35:056 DEBUG 36296 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:50:37:257 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id WHERE d.status = ? ORDER BY d.create_time DESC
15:50:37:257 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.D.getDiagnosisList               : ==> Parameters: confirmed(String)
15:50:37:289 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.D.getDiagnosisList               : <==      Total: 3
15:50:41:434 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:50:41:435 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:50:41:468 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.D.selectById                     : <==      Total: 1
15:50:41:469 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:50:41:469 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:50:41:500 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:50:41:500 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:50:41:500 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:50:41:542 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:50:41:542 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:50:41:542 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:50:41:573 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:50:41:574 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:50:41:574 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:50:41:604 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:50:41:604 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:50:41:605 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:50:41:636 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:50:41:637 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:50:41:637 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:50:41:669 DEBUG 36296 --- [http-nio-8080-exec-6] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:50:44:655 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:50:44:655 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:50:44:685 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : <==      Total: 1
15:50:44:685 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:50:44:686 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:50:44:719 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:50:44:720 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:50:44:720 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:50:44:751 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:50:44:752 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:50:44:752 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:50:44:784 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:50:44:784 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:50:44:784 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:50:44:815 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:50:44:815 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:50:44:816 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:50:44:846 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:50:44:846 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:50:44:846 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:50:44:879 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:50:44:879 DEBUG 36296 --- [http-nio-8080-exec-8] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=TreatmentPlans(id=null, diagnosisId=null, treatmentType=null, treatmentDetail=null, startTime=null, endDate=null, doctorId=null, createdTime=null, updatedTime=null), medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=assistant, content=您好！我是您的眼疾诊断AI助手。您的诊断结果是"诊断结果G"，我可以回答您关于这份诊断报告的任何问题。), DialogueInfo(role=user, content=你好), DialogueInfo(role=assistant, content=抱歉，发生了错误，请稍后再试。), DialogueInfo(role=user, content=你好)], question=你好, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@3cd28235]
15:50:44:880 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:50:44:880 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 772
15:50:44:880 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:50:44:880 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:50:44:880 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","treatment_plan":{},"medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"assistant","content":"您好！我是您的眼疾诊断AI助手。您的诊断结果是\"诊断结果G\"，我可以回答您关于这份诊断报告的任何问题。"},{"role":"user","content":"你好"},{"role":"assistant","content":"抱歉，发生了错误，请稍后再试。"},{"role":"user","content":"你好"}],"question":"你好","stream":false}
15:50:44:881 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (772-byte body)
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (15122ms)
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 1862
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:50:44 GMT
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"response_id":"296ed338-eba1-4d82-bcbb-8143c198c2ec","content":"<think>\n好的，用户一开始用中文打招呼，我回复了错误提示。可能系统出现问题，用户再次尝试后，我需要正确处理。现在用户第三次发送“你好”，我需要根据提供的检查结果来回应。检查结果显示诊断结果G，角膜炎，建议使用药物E。用户可能想了解诊断的具体含义、治疗方法或药物信息。需要以专业但易懂的方式解释诊断结果，说明角膜炎的注意事项，药物E的用法和可能的副作用，同时提醒用户遵循医生建议，及时复诊。还要保持友好，避免使用过于专业的术语，确保用户理解。另外，用户可能担心是否需要进一步治疗或检查，需要明确说明治疗计划和用药信息中的内容，并强调及时就医的重要性。确保回答全面，涵盖用户可能关心的各个方面。\n</think>\n\n\n\n您好！根据您提供的检查报告：\n\n1. 诊断提示存在角膜炎，这是角膜（黑眼球表面透明组织）的炎症反应，常见症状包括眼红、疼痛、畏光、流泪等\n\n2. 目前建议：\n- 使用处方药物E（25mg/次/日），该药物属于第三代氟喹诺酮类抗生素眼药水\n- 用药期间注意保持眼部卫生，避免揉眼\n- 佩戴隐形眼镜者需暂停使用\n\n3. 需要密切观察：\n① 若出现视力下降、分泌物增多或用药3天无改善，请立即复诊\n② 建议3天后复查角膜荧光素染色评估恢复情况\n\n4. 温馨提示：\n角膜炎的常见诱因包括外伤、病原体感染（细菌/病毒/真菌）、干眼症等。近期需注意避免游泳、眼部化妆等可能污染眼睛的行为。\n\n请遵医嘱规范用药，祝您早日康复！","references":[],"created_at":"2025-04-05T07:51:00.001675+00:00"}
15:51:00:004 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (1862-byte body)
15:51:39:631 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:51:39:632 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:51:39:662 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.D.selectById                     : <==      Total: 1
15:51:39:662 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:51:39:663 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:51:39:696 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:51:39:697 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:51:39:697 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:51:39:727 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:51:39:727 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:51:39:727 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:51:39:766 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:51:39:767 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:51:39:767 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:51:39:796 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:51:39:797 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:51:39:797 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:51:39:834 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:51:39:834 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:51:39:835 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:51:39:866 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:51:39:867 DEBUG 36296 --- [http-nio-8080-exec-10] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=TreatmentPlans(id=null, diagnosisId=null, treatmentType=null, treatmentDetail=null, startTime=null, endDate=null, doctorId=null, createdTime=null, updatedTime=null), medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=assistant, content=您好！我是您的眼疾诊断AI助手。您的诊断结果是"诊断结果G"，我可以回答您关于这份诊断报告的任何问题。), DialogueInfo(role=user, content=你好), DialogueInfo(role=assistant, content=抱歉，发生了错误，请稍后再试。), DialogueInfo(role=user, content=你好), DialogueInfo(role=assistant, content=抱歉，发生了错误，请稍后再试。), DialogueInfo(role=user, content=你好)], question=你好, stream=false)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@3cd28235]
15:51:39:867 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:51:39:868 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 886
15:51:39:868 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:51:39:868 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:51:39:868 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","treatment_plan":{},"medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"assistant","content":"您好！我是您的眼疾诊断AI助手。您的诊断结果是\"诊断结果G\"，我可以回答您关于这份诊断报告的任何问题。"},{"role":"user","content":"你好"},{"role":"assistant","content":"抱歉，发生了错误，请稍后再试。"},{"role":"user","content":"你好"},{"role":"assistant","content":"抱歉，发生了错误，请稍后再试。"},{"role":"user","content":"你好"}],"question":"你好","stream":false}
15:51:39:868 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (886-byte body)
15:51:57:559 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (17691ms)
15:51:57:559 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-length: 2495
15:51:57:559 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: application/json
15:51:57:560 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:51:39 GMT
15:51:57:560 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:51:57:560 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:51:57:560 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"response_id":"735ebc1b-30f0-422d-8a81-38532c6914e1","content":"<think>\n好的，我现在需要处理用户的问题。用户之前输入了“你好”，但之前的回复出现了错误提示。现在用户再次发送“你好”，我需要正确回应。\n\n首先，检查用户提供的诊断结果：诊断结果G，备注提到角膜炎，建议用药物E，剂量25mg，每天一次，没有副作用。不过治疗计划显示无，这可能需要注意。\n\n用户现在的提问是“你好”，看起来是打招呼，但结合之前的错误，可能需要更友好的回应，同时引导用户提出具体问题。用户可能有疑问关于诊断结果、药物使用或角膜炎的情况。\n\n根据职责，我需要解释检查结果，回答疾病相关问题，提供专业建议，用易懂的语言，并建议咨询正规医生。不能做确定性诊断，不开处方，避免替代医生决策。\n\n需要确认用户是否了解诊断结果G的具体内容，是否需要解释角膜炎的原因、治疗方法，或者药物E的使用注意事项。虽然用药信息中可能的副作用为“无”，但实际药物通常都有潜在副作用，可能需要提醒用户遵循医嘱，注意观察。\n\n用户可能不太清楚诊断术语，需要用通俗的话解释角膜炎，说明药物E的作用，以及治疗的重要性。同时强调虽然AI提供信息，但最终需医生确认。\n\n另外，治疗计划显示“无”，这可能是个矛盾点，因为备注建议药物治疗。需要指出这一点，建议用户与医生确认治疗计划，确保用药正确。\n\n最后，保持友好，鼓励用户提出具体问题，并提醒及时就医。避免使用专业术语过多，确保用户理解。\n</think>\n\n\n\n您好！您的检查结果显示存在角膜炎，医生建议使用药物E进行治疗（25mg，每日一次）。虽然系统显示该药物没有标注副作用，但任何药物都可能存在个体差异反应，建议：\n\n1. 用药期间注意观察眼睛发红、疼痛或视力变化\n2. 保持眼部卫生，避免揉眼\n3. 使用药物7天后务必复查\n4. 出现异常分泌物或症状加重请立即就诊\n\n需要提醒的是，系统显示\"无治疗计划\"可能存在信息矛盾，建议您联系主诊医生确认具体治疗方案。如对药物使用或角膜炎的注意事项有更多疑问，欢迎继续提问。","references":[],"created_at":"2025-04-05T07:51:57.557886+00:00"}
15:51:57:560 DEBUG 36296 --- [http-nio-8080-exec-10] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END HTTP (2495-byte body)
15:53:41:955 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:53:41:955 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:53:41:986 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.D.selectById                     : <==      Total: 1
15:53:41:986 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:53:41:987 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:53:42:017 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:53:42:018 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:53:42:018 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:53:42:050 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:53:42:051 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:53:42:051 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:53:42:083 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:53:42:083 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:53:42:084 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:53:42:114 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:53:42:114 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:53:42:115 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:53:42:148 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:53:42:148 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:53:42:149 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:53:42:179 DEBUG 36296 --- [http-nio-8080-exec-2] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:53:42:183 DEBUG 36296 --- [pool-1-thread-1] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=TreatmentPlans(id=null, diagnosisId=null, treatmentType=null, treatmentDetail=null, startTime=null, endDate=null, doctorId=null, createdTime=null, updatedTime=null), medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=user, content=这个病严重吗？), DialogueInfo(role=assistant, content=根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。)], question=我需要注意些什么？, stream=true)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@3cd28235]
15:53:42:184 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:53:42:184 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 917
15:53:42:184 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:53:42:184 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:53:42:184 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","treatment_plan":{},"medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"user","content":"这个病严重吗？"},{"role":"assistant","content":"根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。"}],"question":"我需要注意些什么？","stream":true}
15:53:42:184 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (917-byte body)
15:53:42:728 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (542ms)
15:53:42:728 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: text/event-stream; charset=utf-8
15:53:42:728 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:53:41 GMT
15:53:42:728 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:53:42:728 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] transfer-encoding: chunked
15:53:42:728 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:54:12:685  WARN 36296 --- [http-nio-8080-exec-3] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.context.request.async.AsyncRequestTimeoutException]
15:54:12:723 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- ERROR InterruptedIOException: interrupted (542ms)
15:54:12:724 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] java.io.InterruptedIOException: interrupted
	at okio.Timeout.throwIfReached(Timeout.kt:98)
	at okio.InputStreamSource.read(JvmOkio.kt:91)
	at okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:125)
	at okio.RealBufferedSource.request(RealBufferedSource.kt:206)
	at okio.RealBufferedSource.require(RealBufferedSource.kt:199)
	at okio.RealBufferedSource.readHexadecimalUnsignedLong(RealBufferedSource.kt:381)
	at okhttp3.internal.http1.Http1ExchangeCodec$ChunkedSource.readChunkSize(Http1ExchangeCodec.kt:429)
	at okhttp3.internal.http1.Http1ExchangeCodec$ChunkedSource.read(Http1ExchangeCodec.kt:408)
	at okhttp3.internal.connection.Exchange$ResponseBodySource.read(Exchange.kt:276)
	at okio.RealBufferedSource$inputStream$1.read(RealBufferedSource.kt:158)
	at java.base/java.io.InputStream.read(InputStream.java:218)
	at feign.Util.copy(Util.java:329)
	at feign.Util.toByteArray(Util.java:312)
	at feign.Logger.logAndRebufferResponse(Logger.java:126)
	at feign.slf4j.Slf4jLogger.logAndRebufferResponse(Slf4jLogger.java:61)
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:141)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:91)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100)
	at jdk.proxy2/jdk.proxy2.$Proxy137.eye_doctor_chat(Unknown Source)
	at com.luojiawei.his_service.controller.ChatController.lambda$ask$0(ChatController.java:55)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)

15:54:12:724 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END ERROR
15:54:15:182 DEBUG 36296 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==>  Preparing: SELECT d.id, d.create_time, d.status, d.name, d.result, a.version FROM diagnosis_report d JOIN ai_model a ON d.aimodel_id = a.id ORDER BY d.create_time DESC
15:54:15:182 DEBUG 36296 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : ==> Parameters: 
15:54:15:215 DEBUG 36296 --- [http-nio-8080-exec-4] c.l.h.m.D.getDiagnosisList               : <==      Total: 5
15:54:20:411 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:54:20:412 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:54:20:442 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.D.selectById                     : <==      Total: 1
15:54:20:442 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:54:20:442 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:54:20:473 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:54:20:473 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:54:20:473 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:54:20:504 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:54:20:505 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:54:20:505 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:54:20:535 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:54:20:536 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:54:20:536 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:54:20:566 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:54:20:567 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:54:20:567 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:54:20:597 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:54:20:597 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:54:20:598 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:54:20:628 DEBUG 36296 --- [http-nio-8080-exec-5] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:54:53:717 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:54:53:717 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:54:53:748 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.D.selectById                     : <==      Total: 1
15:54:53:748 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:54:53:748 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:54:53:778 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:54:53:779 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:54:53:779 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:54:53:810 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:54:53:811 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:54:53:811 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:54:53:841 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:54:53:841 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:54:53:842 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:54:53:875 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:54:53:875 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:54:53:875 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:54:53:917 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:54:53:917 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:54:53:917 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:54:53:950 DEBUG 36296 --- [http-nio-8080-exec-8] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:54:53:951 DEBUG 36296 --- [pool-1-thread-1] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=TreatmentPlans(id=null, diagnosisId=null, treatmentType=null, treatmentDetail=null, startTime=null, endDate=null, doctorId=null, createdTime=null, updatedTime=null), medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=user, content=这个病严重吗？), DialogueInfo(role=assistant, content=根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。)], question=我需要注意些什么？, stream=true)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@3cd28235]
15:54:53:953 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:54:53:953 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 917
15:54:53:953 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:54:53:953 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:54:53:953 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","treatment_plan":{},"medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"user","content":"这个病严重吗？"},{"role":"assistant","content":"根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。"}],"question":"我需要注意些什么？","stream":true}
15:54:53:953 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (917-byte body)
15:54:54:802 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (848ms)
15:54:54:802 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: text/event-stream; charset=utf-8
15:54:54:802 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:54:52 GMT
15:54:54:802 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:54:54:802 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] transfer-encoding: chunked
15:54:54:802 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:55:24:680  WARN 36296 --- [http-nio-8080-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.context.request.async.AsyncRequestTimeoutException]
15:55:24:730 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- ERROR InterruptedIOException: interrupted (848ms)
15:55:24:731 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] java.io.InterruptedIOException: interrupted
	at okio.Timeout.throwIfReached(Timeout.kt:98)
	at okio.InputStreamSource.read(JvmOkio.kt:91)
	at okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:125)
	at okio.RealBufferedSource.request(RealBufferedSource.kt:206)
	at okio.RealBufferedSource.require(RealBufferedSource.kt:199)
	at okio.RealBufferedSource.readHexadecimalUnsignedLong(RealBufferedSource.kt:381)
	at okhttp3.internal.http1.Http1ExchangeCodec$ChunkedSource.readChunkSize(Http1ExchangeCodec.kt:429)
	at okhttp3.internal.http1.Http1ExchangeCodec$ChunkedSource.read(Http1ExchangeCodec.kt:408)
	at okhttp3.internal.connection.Exchange$ResponseBodySource.read(Exchange.kt:276)
	at okio.RealBufferedSource$inputStream$1.read(RealBufferedSource.kt:158)
	at java.base/java.io.InputStream.read(InputStream.java:218)
	at feign.Util.copy(Util.java:329)
	at feign.Util.toByteArray(Util.java:312)
	at feign.Logger.logAndRebufferResponse(Logger.java:126)
	at feign.slf4j.Slf4jLogger.logAndRebufferResponse(Slf4jLogger.java:61)
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:141)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:91)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100)
	at jdk.proxy2/jdk.proxy2.$Proxy137.eye_doctor_chat(Unknown Source)
	at com.luojiawei.his_service.controller.ChatController.lambda$ask$0(ChatController.java:55)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)

15:55:24:731 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END ERROR
15:55:48:565 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==>  Preparing: SELECT id,patient_id,doctor_id,aimodel_id,result,create_time,status,id_card,name,score,remark FROM diagnosis_report WHERE id=?
15:55:48:565 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : ==> Parameters: 5(Integer)
15:55:48:597 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.D.selectById                     : <==      Total: 1
15:55:48:597 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,open_id,hospital_pid,city,province,county,avatar,sex,birthday,age FROM patient WHERE id=?
15:55:48:597 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : ==> Parameters: 7(Integer)
15:55:48:628 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.PatientMapper.selectById    : <==      Total: 1
15:55:48:628 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==>  Preparing: SELECT id,phone,id_card,name,verified,verified_by,verified_time,license,department,hospital_pid FROM doctor WHERE id=?
15:55:48:628 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : ==> Parameters: 5(Integer)
15:55:48:660 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.DoctorMapper.selectById     : <==      Total: 1
15:55:48:661 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==>  Preparing: select * from eye_images where dignosis_report_id = ?
15:55:48:661 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : ==> Parameters: 5(Integer)
15:55:48:694 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.E.selectListByDiagnosisId        : <==      Total: 1
15:55:48:695 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==>  Preparing: select * from treatment_plans where diagnosis_id = ?
15:55:48:695 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:55:48:726 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.T.selectByDiagnosisId            : <==      Total: 0
15:55:48:726 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==>  Preparing: select * from medication_recommendations where diagnosis_id = ?
15:55:48:726 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : ==> Parameters: 5(Integer)
15:55:48:764 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.m.M.selectByDiagnosisId            : <==      Total: 1
15:55:48:764 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==>  Preparing: SELECT id,version,deploy_time,accuracy FROM ai_model WHERE id=?
15:55:48:764 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : ==> Parameters: 5(Integer)
15:55:48:795 DEBUG 36296 --- [http-nio-8080-exec-1] c.l.h.mapper.AiModelMapper.selectById    : <==      Total: 1
15:55:48:796 DEBUG 36296 --- [pool-1-thread-1] o.s.c.openfeign.support.SpringEncoder    : Writing [ChatForm(diagnosisName=诊断结果G, diagnosisCategory=诊断结果G, result=诊断结果G, remark=患者角膜炎，建议药物治疗, treatmentPlan=TreatmentPlans(id=null, diagnosisId=null, treatmentType=null, treatmentDetail=null, startTime=null, endDate=null, doctorId=null, createdTime=null, updatedTime=null), medications=[MedicationRecommendations(id=5, diagnosisId=5, medicationName=药物E, dosage=25mg, frequency=一天一次, sideEffects=无, startTime=null, endTime=null, doctorId=5, createdTime=2025-05-01T09:00, updatedTime=2025-05-01T09:00)], previousConversations=[DialogueInfo(role=user, content=这个病严重吗？), DialogueInfo(role=assistant, content=根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。)], question=我需要注意些什么？, stream=true)] using [org.springframework.http.converter.json.MappingJackson2HttpMessageConverter@3cd28235]
15:55:48:796 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> POST http://ai-doctor-service/api/eye-doctor/chat HTTP/1.1
15:55:48:796 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Length: 917
15:55:48:796 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] Content-Type: application/json
15:55:48:796 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:55:48:797 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] {"disease_name":"诊断结果G","disease_category":"诊断结果G","result":"诊断结果G","remark":"患者角膜炎，建议药物治疗","treatment_plan":{},"medications":[{"id":5,"diagnosis_id":5,"medication_name":"药物E","dosage":"25mg","frequency":"一天一次","side_effects":"无","doctor_id":5,"created_time":"2025-05-01 09:00:00","updated_time":"2025-05-01 09:00:00"}],"previous_conversations":[{"role":"user","content":"这个病严重吗？"},{"role":"assistant","content":"根据您的眼底检查结果，您目前处于轻度糖尿病视网膜病变阶段。这个阶段并不十分严重，但需要引起重视。糖尿病视网膜病变是一种进行性疾病，如果不加以控制，可能会逐渐发展为更严重的阶段，最终可能导致视力下降甚至失明。因此，定期复查和良好的血糖控制非常重要。"}],"question":"我需要注意些什么？","stream":true}
15:55:48:797 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] ---> END HTTP (917-byte body)
15:55:50:016 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- HTTP/1.1 200 OK (1220ms)
15:55:50:017 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] content-type: text/event-stream; charset=utf-8
15:55:50:017 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] date: Sat, 05 Apr 2025 07:55:47 GMT
15:55:50:017 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] server: uvicorn
15:55:50:017 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] transfer-encoding: chunked
15:55:50:017 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] 
15:55:57:959  WARN 36296 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Start destroying Publisher
15:55:57:959  WARN 36296 --- [Thread-15] c.a.nacos.common.notify.NotifyCenter     : [NotifyCenter] Destruction of the end
15:55:57:959  WARN 36296 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Start destroying common HttpClient
15:55:57:974  WARN 36296 --- [Thread-18] c.a.n.common.http.HttpClientBeanHolder   : [HttpClientBeanHolder] Destruction of the end
15:56:00:080  INFO 36296 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registering from Nacos Server now...
15:56:00:118  INFO 36296 --- [SpringApplicationShutdownHook] c.a.c.n.registry.NacosServiceRegistry    : De-registration finished.
15:56:00:183  INFO 36296 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
15:56:00:288 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- ERROR InterruptedIOException: interrupted (1220ms)
15:56:00:288 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] java.io.InterruptedIOException: interrupted
	at okio.Timeout.throwIfReached(Timeout.kt:98)
	at okio.InputStreamSource.read(JvmOkio.kt:91)
	at okio.AsyncTimeout$source$1.read(AsyncTimeout.kt:125)
	at okio.RealBufferedSource.request(RealBufferedSource.kt:206)
	at okio.RealBufferedSource.require(RealBufferedSource.kt:199)
	at okio.RealBufferedSource.readHexadecimalUnsignedLong(RealBufferedSource.kt:381)
	at okhttp3.internal.http1.Http1ExchangeCodec$ChunkedSource.readChunkSize(Http1ExchangeCodec.kt:429)
	at okhttp3.internal.http1.Http1ExchangeCodec$ChunkedSource.read(Http1ExchangeCodec.kt:408)
	at okhttp3.internal.connection.Exchange$ResponseBodySource.read(Exchange.kt:276)
	at okio.RealBufferedSource$inputStream$1.read(RealBufferedSource.kt:158)
	at java.base/java.io.InputStream.read(InputStream.java:218)
	at feign.Util.copy(Util.java:329)
	at feign.Util.toByteArray(Util.java:312)
	at feign.Logger.logAndRebufferResponse(Logger.java:126)
	at feign.slf4j.Slf4jLogger.logAndRebufferResponse(Slf4jLogger.java:61)
	at feign.AsyncResponseHandler.handleResponse(AsyncResponseHandler.java:70)
	at feign.SynchronousMethodHandler.executeAndDecode(SynchronousMethodHandler.java:141)
	at feign.SynchronousMethodHandler.invoke(SynchronousMethodHandler.java:91)
	at feign.ReflectiveFeign$FeignInvocationHandler.invoke(ReflectiveFeign.java:100)
	at jdk.proxy2/jdk.proxy2.$Proxy137.eye_doctor_chat(Unknown Source)
	at com.luojiawei.his_service.controller.ChatController.lambda$ask$0(ChatController.java:55)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)

15:56:00:288 DEBUG 36296 --- [pool-1-thread-1] c.l.api.client.FastAPIAiDoctorClient     : [FastAPIAiDoctorClient#eye_doctor_chat] <--- END ERROR
15:56:00:508  INFO 36296 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
